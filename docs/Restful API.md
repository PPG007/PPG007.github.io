# Restful API

- URL 表示资源，看到 URL 就知道是什么。
- HTTP Method 表示操作，获取、修改、删除等，是动作。
- 通过 HTTP status code 判断结果如何。
- 面向资源。

## Level

### Level 0

一个 URL 与一个 HTTP 方法，只是将 HTTP 作为传输协定，使用的 URL 只是个接收请求进行回应的端点，请求中的细节都包含在发送过去的请求中。

### Level 1

URL 开始表示资源，多个 URL 和一个请求方法，HTTP 方法只是用来发起请求，请求的细节由请求本体来提供。

### Level 2

使用多个 URL 和 HTTP 方法，URL 表示资源，HTTP 方法表示想进行的操作，HTTP 状态返回码表示结果。

### Level 3

允许从当前 URL 可以知道其他的相关资源以及如何对它们进行操作。

保持 JSON 的简单、规范。

## 设计 URL

URL 应该由名词组成。

使用复数名词。

如果要表示单个资源，应该在复数名词后加唯一表示，例如：`users/{id}`。

正确地使用 HTTP 方法和 URL 的组合：

URL|POST|GET|PUT|PATCH|DELETE
---|----|---|---|-----|------
`/users`|创建一个新用户|获取所有用户|无|无|无
`/users/{id}`|无|通过 id 获取用户|通过 id 更新全部字段或创建（如果不存在）用户|部分地更新用户|通过 id 删除用户

如果对于一些非常规的操作且没有合适的抽象资源描述，使用 POST + 动词结尾，例如 `POST /bolg/translate`。

资源可以嵌套，也可以有子资源，PATCH 不能用于不可继续分割的属性。

可以将任意有意义的信息插入到资源路径中，表示对资源的描述。

## 其他

不要信任客户端的 ID 或者其他信息，这些信息应该由服务端从 token 中提取出来。

请求和响应都应该设置 Content-Type 为 `application/json`。

如果要在请求和响应中包含时间，应该使用 ISO 8601 或者 RFC 3339 标准。

DELETE 请求也要满足幂等性。

## 问题

Level 2 和使用链接表示从属或其他关系。

- 响应成功的响应返回中需要携带 code 和 message 吗？
- 在 Restful 中是不是不会出现 405。
- token 中已经有的信息是不是不应该再出现在 path 变量中（例如用户 id）？
