<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.94" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"应用结构","image":[""],"dateModified":"2025-05-13T05:52:32.000Z","author":[]}</script><meta property="og:url" content="https://ppg007.github.io/yii/docs/structure.html"><meta property="og:site_name" content="PPG007 的文档"><meta property="og:title" content="应用结构"><meta property="og:description" content="应用结构 入口脚本 入口脚本是应用启动的第一步，一个应用只有一个入口脚本。终端用户的请求通过入口脚本实例化应用并将请求转发到应用。 入口脚本的工作： 定义全局常量。 注册 Composer 自动加载器。 包含 Yii 类文件。 加载应用配置。 创建一个应用实例并启动。 例如： 提示 常量定义应该在入口脚本的开头，这样引入其他 PHP 文件时常量能够生效..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-05-13T05:52:32.000Z"><meta property="article:modified_time" content="2025-05-13T05:52:32.000Z"><title>应用结构 | PPG007 的文档</title><meta name="description" content="应用结构 入口脚本 入口脚本是应用启动的第一步，一个应用只有一个入口脚本。终端用户的请求通过入口脚本实例化应用并将请求转发到应用。 入口脚本的工作： 定义全局常量。 注册 Composer 自动加载器。 包含 Yii 类文件。 加载应用配置。 创建一个应用实例并启动。 例如： 提示 常量定义应该在入口脚本的开头，这样引入其他 PHP 文件时常量能够生效...">
    <link rel="preload" href="/assets/style-BzndG6_W.css" as="style"><link rel="stylesheet" href="/assets/style-BzndG6_W.css">
    <link rel="modulepreload" href="/assets/app-rQI8KFp-.js"><link rel="modulepreload" href="/assets/structure.html-CroKvCnp.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-D7wReDK-.js" as="script"><link rel="prefetch" href="/assets/index.html-CXpkGyjP.js" as="script"><link rel="prefetch" href="/assets/index.html-Z-rfWOlq.js" as="script"><link rel="prefetch" href="/assets/index.html-CHOCx_m5.js" as="script"><link rel="prefetch" href="/assets/index.html-CrRLrMvh.js" as="script"><link rel="prefetch" href="/assets/index.html-u0v_z2Zt.js" as="script"><link rel="prefetch" href="/assets/index.html-DPzP9S-1.js" as="script"><link rel="prefetch" href="/assets/index.html-DujX7JQP.js" as="script"><link rel="prefetch" href="/assets/index.html-DrESWj0L.js" as="script"><link rel="prefetch" href="/assets/index.html-N9SDx7Mk.js" as="script"><link rel="prefetch" href="/assets/index.html-DbHVFssK.js" as="script"><link rel="prefetch" href="/assets/index.html-D0lZHCf3.js" as="script"><link rel="prefetch" href="/assets/index.html-D5sSc3QH.js" as="script"><link rel="prefetch" href="/assets/index.html-Cbr7THop.js" as="script"><link rel="prefetch" href="/assets/index.html-CfHjV2io.js" as="script"><link rel="prefetch" href="/assets/index.html-CXmY-37k.js" as="script"><link rel="prefetch" href="/assets/index.html-BrYRsal6.js" as="script"><link rel="prefetch" href="/assets/index.html-COYlVFM5.js" as="script"><link rel="prefetch" href="/assets/index.html-KSIjbzJM.js" as="script"><link rel="prefetch" href="/assets/index.html-Dlx84cUK.js" as="script"><link rel="prefetch" href="/assets/index.html-DfnPI5WX.js" as="script"><link rel="prefetch" href="/assets/index.html-B8RbaJOm.js" as="script"><link rel="prefetch" href="/assets/index.html-BkDcFVwb.js" as="script"><link rel="prefetch" href="/assets/index.html-B21a9Hf8.js" as="script"><link rel="prefetch" href="/assets/index.html-BKlZqBt8.js" as="script"><link rel="prefetch" href="/assets/index.html-Vw80kwgn.js" as="script"><link rel="prefetch" href="/assets/index.html-CG9zgc5o.js" as="script"><link rel="prefetch" href="/assets/index.html-rQZP8Y8T.js" as="script"><link rel="prefetch" href="/assets/index.html-DLJtgqOp.js" as="script"><link rel="prefetch" href="/assets/index.html-OgYI6NOy.js" as="script"><link rel="prefetch" href="/assets/index.html-D6aAjnQD.js" as="script"><link rel="prefetch" href="/assets/index.html-DSNkD7tA.js" as="script"><link rel="prefetch" href="/assets/index.html-BqLeVtYz.js" as="script"><link rel="prefetch" href="/assets/index.html-yO3J2YiU.js" as="script"><link rel="prefetch" href="/assets/index.html-BNIJAAMZ.js" as="script"><link rel="prefetch" href="/assets/index.html-DicJOqej.js" as="script"><link rel="prefetch" href="/assets/index.html-ygPlFLtP.js" as="script"><link rel="prefetch" href="/assets/index.html-v9_8uRHd.js" as="script"><link rel="prefetch" href="/assets/index.html-ISHXAv6o.js" as="script"><link rel="prefetch" href="/assets/index.html-CRk-54S_.js" as="script"><link rel="prefetch" href="/assets/index.html-D4iIculT.js" as="script"><link rel="prefetch" href="/assets/index.html-CEZ70yYN.js" as="script"><link rel="prefetch" href="/assets/index.html-Cyvz8g50.js" as="script"><link rel="prefetch" href="/assets/index.html-DtpijkWB.js" as="script"><link rel="prefetch" href="/assets/index.html-BySTKIEl.js" as="script"><link rel="prefetch" href="/assets/index.html-DqQjt6CZ.js" as="script"><link rel="prefetch" href="/assets/index.html-JoH3q7y7.js" as="script"><link rel="prefetch" href="/assets/index.html-D9b_mMQX.js" as="script"><link rel="prefetch" href="/assets/index.html-CgBXz8n7.js" as="script"><link rel="prefetch" href="/assets/index.html-CJNGcmbm.js" as="script"><link rel="prefetch" href="/assets/index.html-C-4KXSNE.js" as="script"><link rel="prefetch" href="/assets/index.html-CV5M-5Cp.js" as="script"><link rel="prefetch" href="/assets/index.html-CTe_oVUb.js" as="script"><link rel="prefetch" href="/assets/index.html-HTKGujWW.js" as="script"><link rel="prefetch" href="/assets/index.html-0Zy2zU2r.js" as="script"><link rel="prefetch" href="/assets/async.html-BAMOgoTA.js" as="script"><link rel="prefetch" href="/assets/auto_config.html-P9YJoSFI.js" as="script"><link rel="prefetch" href="/assets/config.html-D0PfgoSd.js" as="script"><link rel="prefetch" href="/assets/cron.html-WATWI5_c.js" as="script"><link rel="prefetch" href="/assets/druid.html-B_8Or6mj.js" as="script"><link rel="prefetch" href="/assets/i18n.html-BDJ5aCHQ.js" as="script"><link rel="prefetch" href="/assets/jdbc.html-DxWPy1yV.js" as="script"><link rel="prefetch" href="/assets/mail.html-B6JiClZv.js" as="script"><link rel="prefetch" href="/assets/mvc_config.html-DGbIj_Ch.js" as="script"><link rel="prefetch" href="/assets/mybatis.html-OdWAM9C0.js" as="script"><link rel="prefetch" href="/assets/shiro.html-Ca_k5sWp.js" as="script"><link rel="prefetch" href="/assets/spring_security.html-B3yb7inz.js" as="script"><link rel="prefetch" href="/assets/thymeleaf.html-DV9fYXdY.js" as="script"><link rel="prefetch" href="/assets/web.html-tIpsj7FB.js" as="script"><link rel="prefetch" href="/assets/ajax.html-CIF-7G1B.js" as="script"><link rel="prefetch" href="/assets/controller.html-jTWMqZbK.js" as="script"><link rel="prefetch" href="/assets/file.html-CIa_plJ6.js" as="script"><link rel="prefetch" href="/assets/filter.html-CnsQsd_C.js" as="script"><link rel="prefetch" href="/assets/java_config.html-FsBEaDn3.js" as="script"><link rel="prefetch" href="/assets/json.html-DSXfIrEN.js" as="script"><link rel="prefetch" href="/assets/others.html-C7KZ2tIB.js" as="script"><link rel="prefetch" href="/assets/servlet.html-eN6_uIjT.js" as="script"><link rel="prefetch" href="/assets/ssm.html-BJ6OwtQd.js" as="script"><link rel="prefetch" href="/assets/bus.html-CbF4pqMf.js" as="script"><link rel="prefetch" href="/assets/config.html-a7t5lgjx.js" as="script"><link rel="prefetch" href="/assets/consul.html-CFCMzumM.js" as="script"><link rel="prefetch" href="/assets/eureka.html-Dt4yMFrX.js" as="script"><link rel="prefetch" href="/assets/feign.html-BELUmnYg.js" as="script"><link rel="prefetch" href="/assets/gateway.html-CBv3QR7H.js" as="script"><link rel="prefetch" href="/assets/hystrix.html-CR__WWlo.js" as="script"><link rel="prefetch" href="/assets/nacos.html-uqwSrdDK.js" as="script"><link rel="prefetch" href="/assets/open_feign.html-DMvkvAsK.js" as="script"><link rel="prefetch" href="/assets/ribbon.html-D93YoJ-H.js" as="script"><link rel="prefetch" href="/assets/sleuth.html-DKTfJocP.js" as="script"><link rel="prefetch" href="/assets/start.html-B0fHWbbF.js" as="script"><link rel="prefetch" href="/assets/stream.html-DWq7zWKQ.js" as="script"><link rel="prefetch" href="/assets/zookeeper.html-NoORpg6_.js" as="script"><link rel="prefetch" href="/assets/zuul.html-C77M_3Gz.js" as="script"><link rel="prefetch" href="/assets/advanced.html-h_QMUd7L.js" as="script"><link rel="prefetch" href="/assets/broker.html-Ic-b7YlR.js" as="script"><link rel="prefetch" href="/assets/cluster.html-VuXAhfrv.js" as="script"><link rel="prefetch" href="/assets/java_queue.html-D8vnFhg-.js" as="script"><link rel="prefetch" href="/assets/java_topic.html-Cvw3nyg-.js" as="script"><link rel="prefetch" href="/assets/jms.html-CyR6KNC4.js" as="script"><link rel="prefetch" href="/assets/linux_deploy.html-D12Kpkw8.js" as="script"><link rel="prefetch" href="/assets/persistent.html-C043ejPp.js" as="script"><link rel="prefetch" href="/assets/protocol.html-CwjSw3dX.js" as="script"><link rel="prefetch" href="/assets/queue_case.html-B3G6C6EY.js" as="script"><link rel="prefetch" href="/assets/spring_activemq.html-DeXFwUNv.js" as="script"><link rel="prefetch" href="/assets/springboot_activemq.html-uMuFwnS1.js" as="script"><link rel="prefetch" href="/assets/start.html-BnoHD747.js" as="script"><link rel="prefetch" href="/assets/annotation_attribute.html-DIe8DAQF.js" as="script"><link rel="prefetch" href="/assets/annotation_field_set.html-QsZk7HcS.js" as="script"><link rel="prefetch" href="/assets/annotation_field_type.html-ZTlpaIIa.js" as="script"><link rel="prefetch" href="/assets/annotation_nature.html-CXDtMbIu.js" as="script"><link rel="prefetch" href="/assets/annotation_set_param.html-CDpig1Tr.js" as="script"><link rel="prefetch" href="/assets/builtin_annotation.html-D6w09yaj.js" as="script"><link rel="prefetch" href="/assets/class.html-CSRjoZYn.js" as="script"><link rel="prefetch" href="/assets/classloader.html-VZ1rKUgo.js" as="script"><link rel="prefetch" href="/assets/get_annotation_attribute.html-VzjifIZq.js" as="script"><link rel="prefetch" href="/assets/meta_annotation.html-C5iPAzrI.js" as="script"><link rel="prefetch" href="/assets/reflection_method.html-B2Jha-r5.js" as="script"><link rel="prefetch" href="/assets/cancel_request.html-NmzpRGcL.js" as="script"><link rel="prefetch" href="/assets/common_apis.html-989pAGcM.js" as="script"><link rel="prefetch" href="/assets/default_settings.html-C3OLy5-e.js" as="script"><link rel="prefetch" href="/assets/interceptor.html-BPqo3GMq.js" as="script"><link rel="prefetch" href="/assets/response_process.html-BeYZ5aRO.js" as="script"><link rel="prefetch" href="/assets/start.html-DJ28tm58.js" as="script"><link rel="prefetch" href="/assets/sso.html-bYv0jVtS.js" as="script"><link rel="prefetch" href="/assets/border.html-BWIFkggF.js" as="script"><link rel="prefetch" href="/assets/class.html-l-e-2ycV.js" as="script"><link rel="prefetch" href="/assets/comment.html-BsibaByH.js" as="script"><link rel="prefetch" href="/assets/concurrent_programming.html-ci9F15xs.js" as="script"><link rel="prefetch" href="/assets/error.html-BPlfBoHL.js" as="script"><link rel="prefetch" href="/assets/format.html-gJVxfsrM.js" as="script"><link rel="prefetch" href="/assets/function.html-rz22ePj6.js" as="script"><link rel="prefetch" href="/assets/meaningful_name.html-DJ1RgSAr.js" as="script"><link rel="prefetch" href="/assets/object_and_data_struct.html-7nyzgUOZ.js" as="script"><link rel="prefetch" href="/assets/start.html-Bkfi7WUZ.js" as="script"><link rel="prefetch" href="/assets/system.html-DffQ419f.js" as="script"><link rel="prefetch" href="/assets/unit_test.html-BW-Pt7MF.js" as="script"><link rel="prefetch" href="/assets/alibaba_java.html-D30TcgPY.js" as="script"><link rel="prefetch" href="/assets/css.html-CdPMxumx.js" as="script"><link rel="prefetch" href="/assets/html.html-BYAnCFwY.js" as="script"><link rel="prefetch" href="/assets/javascript.html-C9YYFRbi.js" as="script"><link rel="prefetch" href="/assets/start.html-D-QDolgk.js" as="script"><link rel="prefetch" href="/assets/background.html-pPlJy1aY.js" as="script"><link rel="prefetch" href="/assets/border.html-BQi1N9zG.js" as="script"><link rel="prefetch" href="/assets/box_model.html-DV3g9Teo.js" as="script"><link rel="prefetch" href="/assets/color.html-BS9224ir.js" as="script"><link rel="prefetch" href="/assets/flex.html-C6ZIVPig.js" as="script"><link rel="prefetch" href="/assets/font.html-Dfsc2dxG.js" as="script"><link rel="prefetch" href="/assets/layout.html-DqPDytSq.js" as="script"><link rel="prefetch" href="/assets/link.html-DRhZiIkU.js" as="script"><link rel="prefetch" href="/assets/outline.html-ia5DCKz3.js" as="script"><link rel="prefetch" href="/assets/pseudo-element.html-DP2QDCQD.js" as="script"><link rel="prefetch" href="/assets/pseudo_class.html-CXAg9ctM.js" as="script"><link rel="prefetch" href="/assets/selector.html-CJUdzTTj.js" as="script"><link rel="prefetch" href="/assets/text.html-DZxcXLDs.js" as="script"><link rel="prefetch" href="/assets/async.html-Bm3zUy7J.js" as="script"><link rel="prefetch" href="/assets/callableClass.html-_t6bLtMI.js" as="script"><link rel="prefetch" href="/assets/class.html-epyfEs3A.js" as="script"><link rel="prefetch" href="/assets/exception.html-DNuWoIh4.js" as="script"><link rel="prefetch" href="/assets/function.html-DxmccTlI.js" as="script"><link rel="prefetch" href="/assets/generators.html-BpdpD3q5.js" as="script"><link rel="prefetch" href="/assets/generics.html-BhJqRhBt.js" as="script"><link rel="prefetch" href="/assets/importantConcept.html-k5kmSA7r.js" as="script"><link rel="prefetch" href="/assets/innerType.html-CBHt35kC.js" as="script"><link rel="prefetch" href="/assets/operator.html-DRRuBnIV.js" as="script"><link rel="prefetch" href="/assets/processControl.html-BBccnSGx.js" as="script"><link rel="prefetch" href="/assets/start.html-BQO65wy1.js" as="script"><link rel="prefetch" href="/assets/variables.html-wdVzbXIe.js" as="script"><link rel="prefetch" href="/assets/abstract_factory.html-SmbUmfy8.js" as="script"><link rel="prefetch" href="/assets/adapter.html-2rWNXDcx.js" as="script"><link rel="prefetch" href="/assets/builder.html-CjflZyj-.js" as="script"><link rel="prefetch" href="/assets/command.html-CuFpyykB.js" as="script"><link rel="prefetch" href="/assets/compose.html-BHcaETn3.js" as="script"><link rel="prefetch" href="/assets/decorator.html-CgqWoAHn.js" as="script"><link rel="prefetch" href="/assets/demeter.html-C1pht6Jq.js" as="script"><link rel="prefetch" href="/assets/dip.html-B52SrFrO.js" as="script"><link rel="prefetch" href="/assets/expression.html-CkGmobaU.js" as="script"><link rel="prefetch" href="/assets/facade.html-DBgc5a2R.js" as="script"><link rel="prefetch" href="/assets/factory.html-D8_-8igj.js" as="script"><link rel="prefetch" href="/assets/fly_weight.html-BngSa42O.js" as="script"><link rel="prefetch" href="/assets/interface_isolation.html-BrauNde0.js" as="script"><link rel="prefetch" href="/assets/iterator.html-BnRU2GCl.js" as="script"><link rel="prefetch" href="/assets/lsp.html-CGT4_E9v.js" as="script"><link rel="prefetch" href="/assets/mediator.html-DxAVAjWb.js" as="script"><link rel="prefetch" href="/assets/memento.html-Byv0ZAjg.js" as="script"><link rel="prefetch" href="/assets/observe.html-QydbgDmV.js" as="script"><link rel="prefetch" href="/assets/open_close.html-CNMliQp8.js" as="script"><link rel="prefetch" href="/assets/prototype.html-vd_iCAJn.js" as="script"><link rel="prefetch" href="/assets/proxy.html-Dmqn3_rL.js" as="script"><link rel="prefetch" href="/assets/responsibility_chain.html-DER-XCyE.js" as="script"><link rel="prefetch" href="/assets/singleton.html-DE8b5byL.js" as="script"><link rel="prefetch" href="/assets/srp.html-wwYOQ7AN.js" as="script"><link rel="prefetch" href="/assets/state.html-wnPkxaQ8.js" as="script"><link rel="prefetch" href="/assets/strategy.html-Bvh1VrEW.js" as="script"><link rel="prefetch" href="/assets/template.html-wi-6JqGY.js" as="script"><link rel="prefetch" href="/assets/visitor.html-DxRPPLrk.js" as="script"><link rel="prefetch" href="/assets/ca.html-DXdwDNJa.js" as="script"><link rel="prefetch" href="/assets/domain.html-JXTdolMD.js" as="script"><link rel="prefetch" href="/assets/config_rule.html-DyRkWGkj.js" as="script"><link rel="prefetch" href="/assets/config_tag.html-D2ObE36x.js" as="script"><link rel="prefetch" href="/assets/environment.html-cSrog9HB.js" as="script"><link rel="prefetch" href="/assets/finish_config.html-CkDveSXd.js" as="script"><link rel="prefetch" href="/assets/high_availability.html-BlBDW999.js" as="script"><link rel="prefetch" href="/assets/spring.html-DFzew_fo.js" as="script"><link rel="prefetch" href="/assets/springboot.html-dwAD4BKE.js" as="script"><link rel="prefetch" href="/assets/start.html-D98WI34s.js" as="script"><link rel="prefetch" href="/assets/aggregation.html-DV_8qHbu.js" as="script"><link rel="prefetch" href="/assets/basic.html-Bkt30lIi.js" as="script"><link rel="prefetch" href="/assets/dsl.html-BFCWQLDT.js" as="script"><link rel="prefetch" href="/assets/esindex.html-Bf2f1QHR.js" as="script"><link rel="prefetch" href="/assets/go-client.html-Bagv2epU.js" as="script"><link rel="prefetch" href="/assets/mapping.html-a85OIXmO.js" as="script"><link rel="prefetch" href="/assets/monstache.html-yDvoieR4.js" as="script"><link rel="prefetch" href="/assets/others.html-mr9XhJMl.js" as="script"><link rel="prefetch" href="/assets/array_expansion.html-BwIZaBPR.js" as="script"><link rel="prefetch" href="/assets/async.html-CzdJeG25.js" as="script"><link rel="prefetch" href="/assets/class_basic.html-C9FCHY0M.js" as="script"><link rel="prefetch" href="/assets/class_extends.html-TjGZ2A3P.js" as="script"><link rel="prefetch" href="/assets/function_expansion.html-b9Phyi09.js" as="script"><link rel="prefetch" href="/assets/let_const.html-D0ps39vj.js" as="script"><link rel="prefetch" href="/assets/map.html-CYWGIqVl.js" as="script"><link rel="prefetch" href="/assets/module.html-BJRVEdqk.js" as="script"><link rel="prefetch" href="/assets/object_expansion.html-BGfjQdZS.js" as="script"><link rel="prefetch" href="/assets/object_new_function.html-bvcDJmOI.js" as="script"><link rel="prefetch" href="/assets/operator_expansion.html-C4yW-Ax1.js" as="script"><link rel="prefetch" href="/assets/promise.html-CNKtS2E5.js" as="script"><link rel="prefetch" href="/assets/string_expansion.html-DPbT-6nB.js" as="script"><link rel="prefetch" href="/assets/variable_destructuring_assignment.html-DyHri3r5.js" as="script"><link rel="prefetch" href="/assets/cookie_session.html-Dby-Tw6Z.js" as="script"><link rel="prefetch" href="/assets/data.html-vvodozFA.js" as="script"><link rel="prefetch" href="/assets/jwt.html-BnAgBLUD.js" as="script"><link rel="prefetch" href="/assets/log.html-CUhSTiYE.js" as="script"><link rel="prefetch" href="/assets/middleware.html-B0U0fwjC.js" as="script"><link rel="prefetch" href="/assets/render.html-BTAVxyuM.js" as="script"><link rel="prefetch" href="/assets/router.html-Ckw33eH2.js" as="script"><link rel="prefetch" href="/assets/start.html-D48DrWF1.js" as="script"><link rel="prefetch" href="/assets/validator.html-BhJgnEcq.js" as="script"><link rel="prefetch" href="/assets/basic.html-DOLp42Xo.js" as="script"><link rel="prefetch" href="/assets/branch.html-C6SJchi_.js" as="script"><link rel="prefetch" href="/assets/code_review.html-CBU61f9B.js" as="script"><link rel="prefetch" href="/assets/customize.html-BWmFlZB9.js" as="script"><link rel="prefetch" href="/assets/remote.html-CwuaSvZ5.js" as="script"><link rel="prefetch" href="/assets/start.html-C6jhSPyc.js" as="script"><link rel="prefetch" href="/assets/tag.html-CyFie3AI.js" as="script"><link rel="prefetch" href="/assets/array.html-uKUn5tIf.js" as="script"><link rel="prefetch" href="/assets/bool.html-D3IGEkqb.js" as="script"><link rel="prefetch" href="/assets/complex.html-Be7Y_pqM.js" as="script"><link rel="prefetch" href="/assets/concurrent_programming.html-CMgO90KT.js" as="script"><link rel="prefetch" href="/assets/const.html-Pf_eS6VG.js" as="script"><link rel="prefetch" href="/assets/float.html-BORiJKin.js" as="script"><link rel="prefetch" href="/assets/function.html-XhrL2KoH.js" as="script"><link rel="prefetch" href="/assets/generics.html-FCUAjMVL.js" as="script"><link rel="prefetch" href="/assets/init_main.html-BXK6kgdr.js" as="script"><link rel="prefetch" href="/assets/int.html-SH5jPSWE.js" as="script"><link rel="prefetch" href="/assets/interface.html-1Hws8s8b.js" as="script"><link rel="prefetch" href="/assets/io.html-DBRm9AeK.js" as="script"><link rel="prefetch" href="/assets/map.html-CNZ79kaR.js" as="script"><link rel="prefetch" href="/assets/method.html-CocFIU2s.js" as="script"><link rel="prefetch" href="/assets/module.html-BCMes3cT.js" as="script"><link rel="prefetch" href="/assets/mongodb.html-D807E-KG.js" as="script"><link rel="prefetch" href="/assets/pointer.html-HS2tGWFP.js" as="script"><link rel="prefetch" href="/assets/pprof.html-C7Uch1di.js" as="script"><link rel="prefetch" href="/assets/process_control.html-BCJ1JvfW.js" as="script"><link rel="prefetch" href="/assets/redis.html-BIrdHIfw.js" as="script"><link rel="prefetch" href="/assets/reflect.html-DU1_CmFO.js" as="script"><link rel="prefetch" href="/assets/slice.html-CCVpJiR2.js" as="script"><link rel="prefetch" href="/assets/standard_libs.html-BXA5Vhbo.js" as="script"><link rel="prefetch" href="/assets/string.html-CMH0jt9B.js" as="script"><link rel="prefetch" href="/assets/struct.html-hYjB-6yn.js" as="script"><link rel="prefetch" href="/assets/time.html-DQUQBy-i.js" as="script"><link rel="prefetch" href="/assets/traps.html-niCFkDqh.js" as="script"><link rel="prefetch" href="/assets/type_convert.html-C0JeqOkV.js" as="script"><link rel="prefetch" href="/assets/under_line.html-CiK9Jg0W.js" as="script"><link rel="prefetch" href="/assets/variable.html-CXb2y8Df.js" as="script"><link rel="prefetch" href="/assets/web.html-BzIgbh87.js" as="script"><link rel="prefetch" href="/assets/URL.html-DLrZ1KS9.js" as="script"><link rel="prefetch" href="/assets/element_attributes.html-mraTvMM_.js" as="script"><link rel="prefetch" href="/assets/form.html-GGTPCRi5.js" as="script"><link rel="prefetch" href="/assets/image.html-CMpX4eav.js" as="script"><link rel="prefetch" href="/assets/link.html-DS6t27eQ.js" as="script"><link rel="prefetch" href="/assets/list.html-D5tY-HcX.js" as="script"><link rel="prefetch" href="/assets/meta.html-CDaAS2-6.js" as="script"><link rel="prefetch" href="/assets/multimedia.html-w9n82683.js" as="script"><link rel="prefetch" href="/assets/other.html-CvKTqEH-.js" as="script"><link rel="prefetch" href="/assets/semantic_structure.html-BKABac8k.js" as="script"><link rel="prefetch" href="/assets/table.html-CbOsCdio.js" as="script"><link rel="prefetch" href="/assets/text.html-unCt-1HH.js" as="script"><link rel="prefetch" href="/assets/basic.html-Wk5yOzhr.js" as="script"><link rel="prefetch" href="/assets/basic.html-Ca5YxAMR.js" as="script"><link rel="prefetch" href="/assets/examples.html-BEOF54Ik.js" as="script"><link rel="prefetch" href="/assets/installation.html-CWo6uO_A.js" as="script"><link rel="prefetch" href="/assets/principle.html-dwvyHAse.js" as="script"><link rel="prefetch" href="/assets/trafficManagement.html-CZ09TqrO.js" as="script"><link rel="prefetch" href="/assets/buffer.html-Dwlvu9Zv.js" as="script"><link rel="prefetch" href="/assets/convert.html-C4P4IMuG.js" as="script"><link rel="prefetch" href="/assets/data_stream.html-C00SM0Zm.js" as="script"><link rel="prefetch" href="/assets/object_stream.html-BCJYOgo4.js" as="script"><link rel="prefetch" href="/assets/print_stream.html-A2wyxRnE.js" as="script"><link rel="prefetch" href="/assets/random_file.html-FMMFsEAM.js" as="script"><link rel="prefetch" href="/assets/reader_writer.html-QMSydK_S.js" as="script"><link rel="prefetch" href="/assets/stdio.html-CZELzEmD.js" as="script"><link rel="prefetch" href="/assets/execution_order_in_extend.html-ERyj766U.js" as="script"><link rel="prefetch" href="/assets/index_design.html-Dr2c8ot1.js" as="script"><link rel="prefetch" href="/assets/interface_and_abstract_class.html-DrKMRIVv.js" as="script"><link rel="prefetch" href="/assets/is_like_has.html-DmLsb1dQ.js" as="script"><link rel="prefetch" href="/assets/jvm_data.html-CxO3dmgj.js" as="script"><link rel="prefetch" href="/assets/mysql_index.html-GhATa1bZ.js" as="script"><link rel="prefetch" href="/assets/mysql_lock.html-opUGiWAN.js" as="script"><link rel="prefetch" href="/assets/switch_param.html-C8fwX5WF.js" as="script"><link rel="prefetch" href="/assets/ternary_operator.html-BtR-cC57.js" as="script"><link rel="prefetch" href="/assets/thread_local.html-DzbnSfBS.js" as="script"><link rel="prefetch" href="/assets/transaction.html-D77qDfU2.js" as="script"><link rel="prefetch" href="/assets/transfer.html-L25lvpB4.js" as="script"><link rel="prefetch" href="/assets/tcp.html-D8aFtSJN.js" as="script"><link rel="prefetch" href="/assets/udp.html-DE5Bg9tK.js" as="script"><link rel="prefetch" href="/assets/url.html-DNQtsA8E.js" as="script"><link rel="prefetch" href="/assets/async.html-Bk-xozEc.js" as="script"><link rel="prefetch" href="/assets/basic.html-CWMpsClS.js" as="script"><link rel="prefetch" href="/assets/builtin.html-DJcGXHRP.js" as="script"><link rel="prefetch" href="/assets/data_type.html-CMbdY8gC.js" as="script"><link rel="prefetch" href="/assets/dom.html-4yxJwlAs.js" as="script"><link rel="prefetch" href="/assets/event.html-BYEFoYRe.js" as="script"><link rel="prefetch" href="/assets/grammar.html-Do_h2MIM.js" as="script"><link rel="prefetch" href="/assets/oop.html-BNWvBFua.js" as="script"><link rel="prefetch" href="/assets/operator.html-C-gQsfO1.js" as="script"><link rel="prefetch" href="/assets/async_callback.html-CU6sy8gj.js" as="script"><link rel="prefetch" href="/assets/atomic.html-Cw_SuvfN.js" as="script"><link rel="prefetch" href="/assets/basic.html-ZcWWU-YO.js" as="script"><link rel="prefetch" href="/assets/block_queue.html-CCOIVuLH.js" as="script"><link rel="prefetch" href="/assets/cas.html-BSMHJI63.js" as="script"><link rel="prefetch" href="/assets/collection.html-BLax_Stp.js" as="script"><link rel="prefetch" href="/assets/fork_join.html-vlWGHFeV.js" as="script"><link rel="prefetch" href="/assets/function_interface.html-DksM8n-S.js" as="script"><link rel="prefetch" href="/assets/jmm_volatile.html-lrABcAfB.js" as="script"><link rel="prefetch" href="/assets/lock.html-BHZ3LNKo.js" as="script"><link rel="prefetch" href="/assets/lock_case.html-nPaCtzoX.js" as="script"><link rel="prefetch" href="/assets/rwlock.html-C2y_-dTT.js" as="script"><link rel="prefetch" href="/assets/singleton.html-W4Te2w-K.js" as="script"><link rel="prefetch" href="/assets/spin.html-BqO-wyhr.js" as="script"><link rel="prefetch" href="/assets/synchronized.html-CicR9E1N.js" as="script"><link rel="prefetch" href="/assets/thread_method.html-DBSr_rYL.js" as="script"><link rel="prefetch" href="/assets/thread_pool.html-pihrGSNk.js" as="script"><link rel="prefetch" href="/assets/util.html-DaCcw_CH.js" as="script"><link rel="prefetch" href="/assets/context.html-_SEjjeWK.js" as="script"><link rel="prefetch" href="/assets/error-handling.html-BXlIDkUU.js" as="script"><link rel="prefetch" href="/assets/middleware.html-DkHwMget.js" as="script"><link rel="prefetch" href="/assets/request.html-BOI9DhDD.js" as="script"><link rel="prefetch" href="/assets/response.html-Cvrtbvsa.js" as="script"><link rel="prefetch" href="/assets/router.html-D9_hwK-O.js" as="script"><link rel="prefetch" href="/assets/start.html-B19UHkZo.js" as="script"><link rel="prefetch" href="/assets/basic.html-D14-cGIG.js" as="script"><link rel="prefetch" href="/assets/component.html-DFnbcprw.js" as="script"><link rel="prefetch" href="/assets/configMap.html-Cg8l7Btn.js" as="script"><link rel="prefetch" href="/assets/daemonSet.html-CGQtgBZn.js" as="script"><link rel="prefetch" href="/assets/deployment.html-C4noA2dA.js" as="script"><link rel="prefetch" href="/assets/ingress.html-NXCBUTzC.js" as="script"><link rel="prefetch" href="/assets/install.html-C2Vp8SRs.js" as="script"><link rel="prefetch" href="/assets/job.html-C0MrfdKF.js" as="script"><link rel="prefetch" href="/assets/kuberesolver.html-B9a0RHuY.js" as="script"><link rel="prefetch" href="/assets/manage.html-BZET1dVs.js" as="script"><link rel="prefetch" href="/assets/pod.html-B37IGyPr.js" as="script"><link rel="prefetch" href="/assets/secret.html-CXoZWiz2.js" as="script"><link rel="prefetch" href="/assets/service.html-D6EYNusE.js" as="script"><link rel="prefetch" href="/assets/statefulSet.html-Ctdk8lVp.js" as="script"><link rel="prefetch" href="/assets/storage.html-DrGmmpt_.js" as="script"><link rel="prefetch" href="/assets/artisan.html-Ch7UWSde.js" as="script"><link rel="prefetch" href="/assets/concepts.html-B9oNHsH6.js" as="script"><link rel="prefetch" href="/assets/context.html-C6L9kugm.js" as="script"><link rel="prefetch" href="/assets/controller.html-BCYMWveV.js" as="script"><link rel="prefetch" href="/assets/database.html-HYwXVVIV.js" as="script"><link rel="prefetch" href="/assets/deploy.html-Faq702AY.js" as="script"><link rel="prefetch" href="/assets/eloquent.html-BCi93-cg.js" as="script"><link rel="prefetch" href="/assets/error.html-BUfpChbd.js" as="script"><link rel="prefetch" href="/assets/log.html-D2DMCm2i.js" as="script"><link rel="prefetch" href="/assets/middleware.html-DOmgjrkx.js" as="script"><link rel="prefetch" href="/assets/request.html-DLx-pLkm.js" as="script"><link rel="prefetch" href="/assets/response.html-DyeH64OV.js" as="script"><link rel="prefetch" href="/assets/routing.html-Cwlq3xLG.js" as="script"><link rel="prefetch" href="/assets/security.html-Cg4_RCqH.js" as="script"><link rel="prefetch" href="/assets/session.html-JUnil16x.js" as="script"><link rel="prefetch" href="/assets/start.html-BecjPWVI.js" as="script"><link rel="prefetch" href="/assets/utils.html-CeWd2lmv.js" as="script"><link rel="prefetch" href="/assets/validation.html-BqhgjDZe.js" as="script"><link rel="prefetch" href="/assets/basic.html-UeBq6J1s.js" as="script"><link rel="prefetch" href="/assets/basic.html-B3koI7ai.js" as="script"><link rel="prefetch" href="/assets/expand.html-BDYc_Lmv.js" as="script"><link rel="prefetch" href="/assets/standard.html-89IvJ-G-.js" as="script"><link rel="prefetch" href="/assets/aggregation.html-D1fvMUJJ.js" as="script"><link rel="prefetch" href="/assets/collection.html-Gdz-ING6.js" as="script"><link rel="prefetch" href="/assets/database.html-CrCTFrsa.js" as="script"><link rel="prefetch" href="/assets/document.html-Bby9gVcA.js" as="script"><link rel="prefetch" href="/assets/cache.html-SxddRdDE.js" as="script"><link rel="prefetch" href="/assets/config.html-CbHHdTB0.js" as="script"><link rel="prefetch" href="/assets/crud.html-DRJDBcu6.js" as="script"><link rel="prefetch" href="/assets/dynamic_sql.html-BTYAvOI0.js" as="script"><link rel="prefetch" href="/assets/hello_mybatis.html-Dv2K3FS3.js" as="script"><link rel="prefetch" href="/assets/jdbc.html-BCBY2aU_.js" as="script"><link rel="prefetch" href="/assets/life_cycle.html-hA_Q7ESS.js" as="script"><link rel="prefetch" href="/assets/log.html-BnS292tK.js" as="script"><link rel="prefetch" href="/assets/multi_table.html-DNlMPsyf.js" as="script"><link rel="prefetch" href="/assets/resultmap.html-DLr7CHwT.js" as="script"><link rel="prefetch" href="/assets/encode_decode.html-DLx8YriZ.js" as="script"><link rel="prefetch" href="/assets/group_chat.html-DIh-38F5.js" as="script"><link rel="prefetch" href="/assets/heart_check.html-DxWpXPGS.js" as="script"><link rel="prefetch" href="/assets/in_out.html-kqcyADRS.js" as="script"><link rel="prefetch" href="/assets/io_model.html-CwnmVQuo.js" as="script"><link rel="prefetch" href="/assets/netty_core.html-PkfI5ACD.js" as="script"><link rel="prefetch" href="/assets/rpc.html-Bzmx0Net.js" as="script"><link rel="prefetch" href="/assets/task_queue.html-BwE6jaSK.js" as="script"><link rel="prefetch" href="/assets/tcp_package.html-BbAqMt2m.js" as="script"><link rel="prefetch" href="/assets/thread_model.html-CN2PCNRq.js" as="script"><link rel="prefetch" href="/assets/websocket.html-BMMyRzrS.js" as="script"><link rel="prefetch" href="/assets/basic.html-D5GxSDzh.js" as="script"><link rel="prefetch" href="/assets/ca.html-Coq85lqD.js" as="script"><link rel="prefetch" href="/assets/commands.html-DMZR63kt.js" as="script"><link rel="prefetch" href="/assets/doubleEth.html-xwvSo0ss.js" as="script"><link rel="prefetch" href="/assets/singleEth.html-B55Cw4BJ.js" as="script"><link rel="prefetch" href="/assets/smartDNS.html-BxaQfM0h.js" as="script"><link rel="prefetch" href="/assets/vmware.html-B3dmPog7.js" as="script"><link rel="prefetch" href="/assets/basic.html-DfUqQWLX.js" as="script"><link rel="prefetch" href="/assets/class.html-Ceuw8IUQ.js" as="script"><link rel="prefetch" href="/assets/const.html-D699SBsh.js" as="script"><link rel="prefetch" href="/assets/control.html-DI2DI2cs.js" as="script"><link rel="prefetch" href="/assets/enum.html-BaxX52Bx.js" as="script"><link rel="prefetch" href="/assets/exception.html-BbiPodR-.js" as="script"><link rel="prefetch" href="/assets/expression.html-CB8qeu0Z.js" as="script"><link rel="prefetch" href="/assets/fiber.html-DqnyAjoq.js" as="script"><link rel="prefetch" href="/assets/function.html-B2ftRnZX.js" as="script"><link rel="prefetch" href="/assets/generator.html--6PVGUZn.js" as="script"><link rel="prefetch" href="/assets/install.html-CYvfU6cy.js" as="script"><link rel="prefetch" href="/assets/namespace.html-BDVUf5wQ.js" as="script"><link rel="prefetch" href="/assets/operator.html-C4Jyun32.js" as="script"><link rel="prefetch" href="/assets/type.html-D3CpM-yw.js" as="script"><link rel="prefetch" href="/assets/variable.html-CCeeC5OS.js" as="script"><link rel="prefetch" href="/assets/cli.html-BstY2gX7.js" as="script"><link rel="prefetch" href="/assets/component.html-doLAOJmo.js" as="script"><link rel="prefetch" href="/assets/context.html-CK_skTKW.js" as="script"><link rel="prefetch" href="/assets/effect.html-Dx3kcU2I.js" as="script"><link rel="prefetch" href="/assets/hello.html-_h-rmni2.js" as="script"><link rel="prefetch" href="/assets/hooks.html-BEHW4-WT.js" as="script"><link rel="prefetch" href="/assets/jsx.html-DW8mj1lD.js" as="script"><link rel="prefetch" href="/assets/lifecycle.html-BMEPyumu.js" as="script"><link rel="prefetch" href="/assets/props.html-J-7TgGD1.js" as="script"><link rel="prefetch" href="/assets/reducer.html-BWO6ytpE.js" as="script"><link rel="prefetch" href="/assets/redux.html-CxOWG4rO.js" as="script"><link rel="prefetch" href="/assets/ref.html-Chz4QlkA.js" as="script"><link rel="prefetch" href="/assets/router.html-Bhi4wz0R.js" as="script"><link rel="prefetch" href="/assets/state.html-CS8T4j3X.js" as="script"><link rel="prefetch" href="/assets/cluster.html-Ck5P4AAj.js" as="script"><link rel="prefetch" href="/assets/command.html-RLYI9jMk.js" as="script"><link rel="prefetch" href="/assets/config.html-CnmfJYdd.js" as="script"><link rel="prefetch" href="/assets/distributed_lock.html-CyJ13kbZ.js" as="script"><link rel="prefetch" href="/assets/jedis.html-DUhxMoQO.js" as="script"><link rel="prefetch" href="/assets/master_slave.html-BK58cv53.js" as="script"><link rel="prefetch" href="/assets/persistent.html-9ZStp27i.js" as="script"><link rel="prefetch" href="/assets/redis_template.html-BGT7WndZ.js" as="script"><link rel="prefetch" href="/assets/subscribe_publish.html-CULjpMRT.js" as="script"><link rel="prefetch" href="/assets/transaction.html-DP-9fb72.js" as="script"><link rel="prefetch" href="/assets/antonym.html-Cd1wTy00.js" as="script"><link rel="prefetch" href="/assets/back_reference.html-BzjdqjlV.js" as="script"><link rel="prefetch" href="/assets/case.html-GH_g-Uz3.js" as="script"><link rel="prefetch" href="/assets/char.html-B-EGTq2f.js" as="script"><link rel="prefetch" href="/assets/greed_laziness.html-C1crYTVm.js" as="script"><link rel="prefetch" href="/assets/group.html-BeX-h3hV.js" as="script"><link rel="prefetch" href="/assets/meta_char.html-D4UMDDUG.js" as="script"><link rel="prefetch" href="/assets/qualifier.html-BcMVz2tK.js" as="script"><link rel="prefetch" href="/assets/reverse_zero_width_assertion.html-CQI2eOvI.js" as="script"><link rel="prefetch" href="/assets/zero_width_assertion.html-CFVkjqdC.js" as="script"><link rel="prefetch" href="/assets/design.html-BUy0PNTZ.js" as="script"><link rel="prefetch" href="/assets/others.html-BRlhNsr6.js" as="script"><link rel="prefetch" href="/assets/three_level.html-8bx-evKH.js" as="script"><link rel="prefetch" href="/assets/basic.html-CNSZ4exw.js" as="script"><link rel="prefetch" href="/assets/examples-java.html-D0fiPm3K.js" as="script"><link rel="prefetch" href="/assets/features.html-DUJQg2lM.js" as="script"><link rel="prefetch" href="/assets/start.html-CD2RlBK2.js" as="script"><link rel="prefetch" href="/assets/annotation.html-BpnfbNpf.js" as="script"><link rel="prefetch" href="/assets/aop.html-CLY3TYn1.js" as="script"><link rel="prefetch" href="/assets/autowired.html-B7dP3fPP.js" as="script"><link rel="prefetch" href="/assets/di.html-BsBjHp_9.js" as="script"><link rel="prefetch" href="/assets/hello_spring.html-BP_fZeQZ.js" as="script"><link rel="prefetch" href="/assets/ioc.html-Cj9Q9d8-.js" as="script"><link rel="prefetch" href="/assets/ioc_create_object.html-CrpGWBVH.js" as="script"><link rel="prefetch" href="/assets/java_config.html-C215ieDm.js" as="script"><link rel="prefetch" href="/assets/mybatis.html-CO5jJss7.js" as="script"><link rel="prefetch" href="/assets/proxy.html-nSDqotUh.js" as="script"><link rel="prefetch" href="/assets/spring_config.html-CYSiyyHO.js" as="script"><link rel="prefetch" href="/assets/start.html-BGCX8krs.js" as="script"><link rel="prefetch" href="/assets/transaction.html-DHeUs2fJ.js" as="script"><link rel="prefetch" href="/assets/database.html-Dzs97mPt.js" as="script"><link rel="prefetch" href="/assets/delete.html-D-fzcuoC.js" as="script"><link rel="prefetch" href="/assets/init.sql.html-CQCtqG92.js" as="script"><link rel="prefetch" href="/assets/insert.html-D0_x_I1_.js" as="script"><link rel="prefetch" href="/assets/select.html-BHay_TfE.js" as="script"><link rel="prefetch" href="/assets/update.html-C18oMjIg.js" as="script"><link rel="prefetch" href="/assets/base64.html-DdelChb3.js" as="script"><link rel="prefetch" href="/assets/crypto.html-BrcYCXYj.js" as="script"><link rel="prefetch" href="/assets/hash.html-Bd0GDR3Q.js" as="script"><link rel="prefetch" href="/assets/json.html-Cj2necxy.js" as="script"><link rel="prefetch" href="/assets/jwt.html-DouP54g-.js" as="script"><link rel="prefetch" href="/assets/objectId.html-C8WxVtWn.js" as="script"><link rel="prefetch" href="/assets/ocr.html-DRPg-JNQ.js" as="script"><link rel="prefetch" href="/assets/pointDistance.html-BkKi-zUo.js" as="script"><link rel="prefetch" href="/assets/tax.html-zp5rQRi_.js" as="script"><link rel="prefetch" href="/assets/time.html-C_pnOO12.js" as="script"><link rel="prefetch" href="/assets/url.html-CETA3526.js" as="script"><link rel="prefetch" href="/assets/uuid.html-D3JAMDMP.js" as="script"><link rel="prefetch" href="/assets/advance.html-DOC3RyrR.js" as="script"><link rel="prefetch" href="/assets/basic.html-jT-5f5dK.js" as="script"><link rel="prefetch" href="/assets/start.html-CrydpyK_.js" as="script"><link rel="prefetch" href="/assets/dart-flutter.html-CmhPndCm.js" as="script"><link rel="prefetch" href="/assets/debian-wifi.html-CHmw7_qO.js" as="script"><link rel="prefetch" href="/assets/docker.html-DSOLkF-i.js" as="script"><link rel="prefetch" href="/assets/git.html-BMmbjeUd.js" as="script"><link rel="prefetch" href="/assets/go.html-gWvfKMmZ.js" as="script"><link rel="prefetch" href="/assets/java.html-Bxo1-UuT.js" as="script"><link rel="prefetch" href="/assets/maven.html-DghIcx5g.js" as="script"><link rel="prefetch" href="/assets/mongodb.html-C5clkEdt.js" as="script"><link rel="prefetch" href="/assets/mysql.html-AbX3wWKj.js" as="script"><link rel="prefetch" href="/assets/nginx.html-BDALNBjS.js" as="script"><link rel="prefetch" href="/assets/nodejs.html-BZKomMcW.js" as="script"><link rel="prefetch" href="/assets/others.html-CjOazJqh.js" as="script"><link rel="prefetch" href="/assets/php.html-4bRYx1nu.js" as="script"><link rel="prefetch" href="/assets/postman.html-D7aWfSh9.js" as="script"><link rel="prefetch" href="/assets/protoc.html-MXtnk3lQ.js" as="script"><link rel="prefetch" href="/assets/python.html-s5WjuKxw.js" as="script"><link rel="prefetch" href="/assets/redis.html-B8VilVEf.js" as="script"><link rel="prefetch" href="/assets/rtc.html-Fkj0N4TL.js" as="script"><link rel="prefetch" href="/assets/sogou_input.html-BS_akBhB.js" as="script"><link rel="prefetch" href="/assets/vscode.html-OK2IsUA4.js" as="script"><link rel="prefetch" href="/assets/zsh.html-BZ0I6-3s.js" as="script"><link rel="prefetch" href="/assets/common_keys.html-pLnw9dpW.js" as="script"><link rel="prefetch" href="/assets/common_settings.html-Dj1vBfpN.js" as="script"><link rel="prefetch" href="/assets/concepts.html-DEoJClpH.js" as="script"><link rel="prefetch" href="/assets/database.html-JjC8hrQ_.js" as="script"><link rel="prefetch" href="/assets/formatting.html-iwCkrr3r.js" as="script"><link rel="prefetch" href="/assets/request.html-Dd9ZvqwD.js" as="script"><link rel="prefetch" href="/assets/restful.html-Bl3wt5FK.js" as="script"><link rel="prefetch" href="/assets/start.html-D5fh_H37.js" as="script"><link rel="prefetch" href="/assets/api.html-BNZSDi_b.js" as="script"><link rel="prefetch" href="/assets/distributed_lock.html-DLgtwQmM.js" as="script"><link rel="prefetch" href="/assets/election.html-DH_gTx6F.js" as="script"><link rel="prefetch" href="/assets/online_offline.html-B08wOzVx.js" as="script"><link rel="prefetch" href="/assets/shell.html-CAuRXaQR.js" as="script"><link rel="prefetch" href="/assets/start.html-CCgUqhPM.js" as="script"><link rel="prefetch" href="/assets/bothStream.html-DhucLFQb.js" as="script"><link rel="prefetch" href="/assets/clientStream.html-DaZdsJTs.js" as="script"><link rel="prefetch" href="/assets/gateway.html-Czx10Wvx.js" as="script"><link rel="prefetch" href="/assets/loadBalance.html-7P6EU82o.js" as="script"><link rel="prefetch" href="/assets/metadataAndInterceptor.html-DXjTG_Eq.js" as="script"><link rel="prefetch" href="/assets/serverStream.html-CLuycJCy.js" as="script"><link rel="prefetch" href="/assets/start.html-D6i27Kw8.js" as="script"><link rel="prefetch" href="/assets/tls.html-2pyeLGoA.js" as="script"><link rel="prefetch" href="/assets/unary.html-wden6_Cw.js" as="script"><link rel="prefetch" href="/assets/validate.html-MLVJKDw5.js" as="script"><link rel="prefetch" href="/assets/customTag.html-gf8WX_x2.js" as="script"><link rel="prefetch" href="/assets/installAndComplie.html-FgXlEI7X.js" as="script"><link rel="prefetch" href="/assets/protoFile.html-BLyUNysx.js" as="script"><link rel="prefetch" href="/assets/styleGuide.html-CAoOGDMF.js" as="script"><link rel="prefetch" href="/assets/MVVM.html-5QO1WwvQ.js" as="script"><link rel="prefetch" href="/assets/builtin_command.html-BJSaC7PB.js" as="script"><link rel="prefetch" href="/assets/class_style.html-CPvAA4Rp.js" as="script"><link rel="prefetch" href="/assets/cli_proxy.html-e5jOyBDp.js" as="script"><link rel="prefetch" href="/assets/component.html-CN7v09EF.js" as="script"><link rel="prefetch" href="/assets/component_event.html-XHrt2J_R.js" as="script"><link rel="prefetch" href="/assets/computed.html-Rc_YTD5S.js" as="script"><link rel="prefetch" href="/assets/condition.html-DBUDyL9j.js" as="script"><link rel="prefetch" href="/assets/data_bind.html-BvE1Q-yo.js" as="script"><link rel="prefetch" href="/assets/data_proxy.html-BQx9pcEt.js" as="script"><link rel="prefetch" href="/assets/el_data.html-DQGAA5t2.js" as="script"><link rel="prefetch" href="/assets/event.html-VTPB7lsT.js" as="script"><link rel="prefetch" href="/assets/event_bus.html-qcfeS04v.js" as="script"><link rel="prefetch" href="/assets/filter.html-BATRcL44.js" as="script"><link rel="prefetch" href="/assets/life_cycle.html-BuOAh_SH.js" as="script"><link rel="prefetch" href="/assets/list.html-CaJ0r5o7.js" as="script"><link rel="prefetch" href="/assets/publish_subscribe.html-kKNHO0vL.js" as="script"><link rel="prefetch" href="/assets/self_command.html-CDNKtRVp.js" as="script"><link rel="prefetch" href="/assets/slot.html-CgfiogqB.js" as="script"><link rel="prefetch" href="/assets/start.html-CmzjP9UG.js" as="script"><link rel="prefetch" href="/assets/storage.html-BXygrEtJ.js" as="script"><link rel="prefetch" href="/assets/vue_cli.html-C7VOP76z.js" as="script"><link rel="prefetch" href="/assets/vue_resource.html-m_NIUdC2.js" as="script"><link rel="prefetch" href="/assets/vue_router.html-C_stIKKL.js" as="script"><link rel="prefetch" href="/assets/vuex.html-CZWRPZlt.js" as="script"><link rel="prefetch" href="/assets/watch.html-BXJQ5ExA.js" as="script"><link rel="prefetch" href="/assets/common_composition.html-BsV8aTrs.js" as="script"><link rel="prefetch" href="/assets/new_component.html-CZwqwevv.js" as="script"><link rel="prefetch" href="/assets/other_composition.html-CSwAhWiA.js" as="script"><link rel="prefetch" href="/assets/others.html-Dho9s0jg.js" as="script"><link rel="prefetch" href="/assets/start.html-B7697QKp.js" as="script"><link rel="prefetch" href="/assets/404.html-DbN24SnW.js" as="script"><link rel="prefetch" href="/assets/index.html-Bhoh-FiR.js" as="script"><link rel="prefetch" href="/assets/index.html-BXoI0eWL.js" as="script"><link rel="prefetch" href="/assets/index.html-BkFXwtMq.js" as="script"><link rel="prefetch" href="/assets/index.html-CKMDLegt.js" as="script"><link rel="prefetch" href="/assets/index.html-C5KKnjHq.js" as="script"><link rel="prefetch" href="/assets/index.html-BqHePM8T.js" as="script"><link rel="prefetch" href="/assets/index.html-BSyBwO-f.js" as="script"><link rel="prefetch" href="/assets/index.html-CwfsFxD0.js" as="script"><link rel="prefetch" href="/assets/index.html-vzeILJrV.js" as="script"><link rel="prefetch" href="/assets/index.html-pztR-S4w.js" as="script"><link rel="prefetch" href="/assets/index.html-BgqweWmD.js" as="script"><link rel="prefetch" href="/assets/index.html-BO1CJtHc.js" as="script"><link rel="prefetch" href="/assets/index.html-BbUbEnbz.js" as="script"><link rel="prefetch" href="/assets/index.html-C7UyGvdu.js" as="script"><link rel="prefetch" href="/assets/index.html-BEohYIr2.js" as="script"><link rel="prefetch" href="/assets/index.html-CgP9zwen.js" as="script"><link rel="prefetch" href="/assets/index.html-sn0f_VeB.js" as="script"><link rel="prefetch" href="/assets/index.html-BFjAx5Je.js" as="script"><link rel="prefetch" href="/assets/index.html-CIWb93wE.js" as="script"><link rel="prefetch" href="/assets/index.html-DxmRBcVT.js" as="script"><link rel="prefetch" href="/assets/index.html-DUdDepoF.js" as="script"><link rel="prefetch" href="/assets/index.html-v-iOugOf.js" as="script"><link rel="prefetch" href="/assets/index.html-iujIqyuG.js" as="script"><link rel="prefetch" href="/assets/index.html-CHgODwyL.js" as="script"><link rel="prefetch" href="/assets/index.html-B1D7hkeU.js" as="script"><link rel="prefetch" href="/assets/index.html-BmkV1wIl.js" as="script"><link rel="prefetch" href="/assets/index.html-D_22R3bK.js" as="script"><link rel="prefetch" href="/assets/index.html-CyRKzLaB.js" as="script"><link rel="prefetch" href="/assets/index.html-CQURLeq6.js" as="script"><link rel="prefetch" href="/assets/index.html-XjHvXnOo.js" as="script"><link rel="prefetch" href="/assets/index.html-C59FYbyW.js" as="script"><link rel="prefetch" href="/assets/index.html-B2tUh3AZ.js" as="script"><link rel="prefetch" href="/assets/index.html-CeSTsYsj.js" as="script"><link rel="prefetch" href="/assets/index.html-Nh3yKr02.js" as="script"><link rel="prefetch" href="/assets/index.html-CCWOLUtY.js" as="script"><link rel="prefetch" href="/assets/index.html-DfG9aMHc.js" as="script"><link rel="prefetch" href="/assets/index.html-CTm4F9i_.js" as="script"><link rel="prefetch" href="/assets/index.html-DkD0G9vf.js" as="script"><link rel="prefetch" href="/assets/index.html-B2gUeOGW.js" as="script"><link rel="prefetch" href="/assets/index.html-DMeMKCR1.js" as="script"><link rel="prefetch" href="/assets/index.html-BPPX9NyE.js" as="script"><link rel="prefetch" href="/assets/index.html-BnVTwaJK.js" as="script"><link rel="prefetch" href="/assets/index.html-BqXUa71w.js" as="script"><link rel="prefetch" href="/assets/index.html-qaGEyRzY.js" as="script"><link rel="prefetch" href="/assets/index.html-DG1gRU6Z.js" as="script"><link rel="prefetch" href="/assets/index.html-ChydKkd4.js" as="script"><link rel="prefetch" href="/assets/index.html-CB5TB67m.js" as="script"><link rel="prefetch" href="/assets/index.html-DKvZwl4u.js" as="script"><link rel="prefetch" href="/assets/index.html-D5vYeFZe.js" as="script"><link rel="prefetch" href="/assets/index.html-SDBsKW9T.js" as="script"><link rel="prefetch" href="/assets/index.html-CbygtOr7.js" as="script"><link rel="prefetch" href="/assets/index.html-DeDqHuUF.js" as="script"><link rel="prefetch" href="/assets/index.html-Blme5Ha_.js" as="script"><link rel="prefetch" href="/assets/index.html-CbjGBrol.js" as="script"><link rel="prefetch" href="/assets/index.html-BXHnAmfG.js" as="script"><link rel="prefetch" href="/assets/index.html-AEsz8e12.js" as="script"><link rel="prefetch" href="/assets/index.html-BartVzxa.js" as="script"><link rel="prefetch" href="/assets/index.html-ks8y0Q45.js" as="script"><link rel="prefetch" href="/assets/index.html-B7b-Lw5H.js" as="script"><link rel="prefetch" href="/assets/index.html-zNiAb2nk.js" as="script"><link rel="prefetch" href="/assets/index.html-DN-UBS6N.js" as="script"><link rel="prefetch" href="/assets/index.html-B6pgvW8F.js" as="script"><link rel="prefetch" href="/assets/index.html-WMOetqol.js" as="script"><link rel="prefetch" href="/assets/index.html-bc_3AXvd.js" as="script"><link rel="prefetch" href="/assets/index.html-CbbEU2u7.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-CKV1Bsxh.js" as="script"><link rel="prefetch" href="/assets/giscus-CSXEHdjQ.js" as="script"><link rel="prefetch" href="/assets/SearchResult-BL-S0O6p.js" as="script"><link rel="prefetch" href="/assets/bundle-B0IVlAuJ.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="带我回家"><!----><!----><span class="vp-site-name">PPG007 的文档</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="首页"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:home" sizing="height" height="1em"></iconify-icon><!--]-->首页<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="前端"><!--[--><iconify-icon class="vp-icon" icon="devicon-plain:devicon" sizing="height" height="1em"></iconify-icon>前端<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/html/" aria-label="HTML"><!--[--><iconify-icon class="vp-icon" icon="devicon:html5" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->HTML<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/css/" aria-label="CSS"><!--[--><iconify-icon class="vp-icon" icon="skill-icons:css" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->CSS<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/javascript/" aria-label="JavaScript"><!--[--><iconify-icon class="vp-icon" icon="skill-icons:javascript" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->JavaScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/es6/" aria-label="ES6"><!--[--><iconify-icon class="vp-icon" icon="arcticons:es-de-frontend" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->ES6<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/axios/" aria-label="Axios"><!--[--><iconify-icon class="vp-icon" icon="material-icon-theme:http" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Axios<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vue/" aria-label="Vue"><!--[--><iconify-icon class="vp-icon" icon="logos:vue" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Vue<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/typescript/" aria-label="TypeScript"><!--[--><iconify-icon class="vp-icon" icon="skill-icons:typescript" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->TypeScript<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/koa/" aria-label="Koa"><!--[--><iconify-icon class="vp-icon" icon="simple-icons:koa" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Koa<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/i18next/" aria-label="i18next"><!--[--><iconify-icon class="vp-icon" icon="material-icon-theme:folder-i18n-open" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->i18next<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/react/" aria-label="React"><!--[--><iconify-icon class="vp-icon" icon="material-icon-theme:react" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->React<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/dart/" aria-label="Dart"><!--[--><iconify-icon class="vp-icon" icon="logos:dart" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Dart<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Java"><!--[--><iconify-icon class="vp-icon" icon="material-icon-theme:java" sizing="height" height="1em"></iconify-icon>Java<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/javaio/" aria-label="Java IO"><!--[--><iconify-icon class="vp-icon" icon="oui:input-output" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Java IO<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/annotation-and-reflection/" aria-label="Java 注解和反射"><!--[--><iconify-icon class="vp-icon" icon="devicon:java" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Java 注解和反射<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/javathread/" aria-label="Java 多线程"><!--[--><iconify-icon class="vp-icon" icon="flat-color-icons:parallel-tasks" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Java 多线程<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/javanet/" aria-label="Java 网络通信"><!--[--><iconify-icon class="vp-icon" icon="tabler:network" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Java 网络通信<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/javaknowledge/" aria-label="Java 知识点"><!--[--><iconify-icon class="vp-icon" icon="hugeicons:knowledge-02" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Java 知识点<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/mybatis/" aria-label="Mybatis"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:database" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Mybatis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/netty/" aria-label="Netty"><!--[--><iconify-icon class="vp-icon" icon="carbon:server-dns" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Netty<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/spring/" aria-label="Spring"><!--[--><iconify-icon class="vp-icon" icon="devicon:spring-wordmark" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Spring<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/SpringMVC/" aria-label="SpringMVC"><!--[--><iconify-icon class="vp-icon" icon="logos:spring-icon" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->SpringMVC<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/SpringBoot/" aria-label="SpringBoot"><!--[--><iconify-icon class="vp-icon" icon="simple-icons:springboot" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->SpringBoot<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/dubbo/" aria-label="Dubbo"><!--[--><iconify-icon class="vp-icon" icon="streamline:interface-arrows-data-transfer-diagonal-arrows-arrow-server-data-diagonal-internet-transfer-network" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Dubbo<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/SpringCloud/" aria-label="SpringCloud"><!--[--><iconify-icon class="vp-icon" icon="line-md:cloud-up-twotone" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->SpringCloud<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Go"><!--[--><iconify-icon class="vp-icon" icon="logos:go" sizing="height" height="1em"></iconify-icon>Go<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/go/" aria-label="Go"><!--[--><iconify-icon class="vp-icon" icon="devicon:go" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Go<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/gin/" aria-label="Gin"><!--[--><iconify-icon class="vp-icon" icon="logos:gin" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Gin<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/grpc-and-protobuf/" aria-label="gRPC&amp;Protobuf"><!--[--><iconify-icon class="vp-icon" icon="vscode-icons:file-type-protobuf" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->gRPC&amp;Protobuf<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="PHP"><!--[--><iconify-icon class="vp-icon" icon="skill-icons:php-dark" sizing="height" height="1em"></iconify-icon>PHP<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/php/" aria-label="PHP"><!--[--><iconify-icon class="vp-icon" icon="material-icon-theme:php-elephant" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->PHP<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/yii/" aria-label="Yii"><!--[--><iconify-icon class="vp-icon" icon="logos:yii" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Yii<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/laravel/" aria-label="Laravel"><!--[--><iconify-icon class="vp-icon" icon="skill-icons:laravel-light" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Laravel<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="云相关"><!--[--><iconify-icon class="vp-icon" icon="hugeicons:cloud-server" sizing="height" height="1em"></iconify-icon>云相关<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/linux/" aria-label="Linux"><!--[--><iconify-icon class="vp-icon" icon="logos:linux-tux" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Linux<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/docker/" aria-label="Docker"><!--[--><iconify-icon class="vp-icon" icon="logos:docker-icon" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Docker<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/activemq/" aria-label="ActiveMQ"><!--[--><iconify-icon class="vp-icon" icon="mdi:mq" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->ActiveMQ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/rocketmq/" aria-label="RocketMQ"><!--[--><iconify-icon class="vp-icon" icon="simple-icons:apacherocketmq" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->RocketMQ<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/zookeeper/" aria-label="ZooKeeper"><!--[--><iconify-icon class="vp-icon" icon="logos:apache" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->ZooKeeper<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/openssl/" aria-label="OpenSSL"><!--[--><iconify-icon class="vp-icon" icon="fa-brands:expeditedssl" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->OpenSSL<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/domain/" aria-label="域名获取及 CA 认证"><!--[--><iconify-icon class="vp-icon" icon="stash:domain" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->域名获取及 CA 认证<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/kubernetes/" aria-label="Kubernetes"><!--[--><iconify-icon class="vp-icon" icon="logos:kubernetes" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Kubernetes<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/istio/" aria-label="Istio"><!--[--><iconify-icon class="vp-icon" icon="simple-icons:istio" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Istio<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="数据库"><!--[--><iconify-icon class="vp-icon" icon="iconoir:database-tag-solid" sizing="height" height="1em"></iconify-icon>数据库<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/elasticsearch/" aria-label="Elasticsearch"><!--[--><iconify-icon class="vp-icon" icon="skill-icons:elasticsearch-light" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Elasticsearch<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/mongodb/" aria-label="MongoDB"><!--[--><iconify-icon class="vp-icon" icon="skill-icons:mongodb" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->MongoDB<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/redis/" aria-label="Redis"><!--[--><iconify-icon class="vp-icon" icon="skill-icons:redis-light" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Redis<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/sql/" aria-label="SQL"><!--[--><iconify-icon class="vp-icon" icon="hugeicons:sql" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->SQL<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="others"><!--[--><iconify-icon class="vp-icon" icon="material-icon-theme:folder-other" sizing="height" height="1em"></iconify-icon>others<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/clean-code/" aria-label="Clean Code"><!--[--><iconify-icon class="vp-icon" icon="carbon:clean" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Clean Code<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/codingstyle/" aria-label="Coding Style"><!--[--><iconify-icon class="vp-icon" icon="vscode-icons:file-type-style" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Coding Style<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/design-pattern/" aria-label="设计模式"><!--[--><iconify-icon class="vp-icon" icon="icon-park-outline:bydesign" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->设计模式<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/git/" aria-label="Git"><!--[--><iconify-icon class="vp-icon" icon="devicon:git" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Git<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/markdown/" aria-label="Markdown"><!--[--><iconify-icon class="vp-icon" icon="skill-icons:markdown-light" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Markdown<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/openwrt/" aria-label="搭建软路由"><!--[--><iconify-icon class="vp-icon" icon="cbi:openwrt-logo" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->搭建软路由<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/regex/" aria-label="正则表达式"><!--[--><iconify-icon class="vp-icon" icon="skill-icons:regex-light" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->正则表达式<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/restful/" aria-label="Restful API"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:http" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Restful API<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/tools/" aria-label="在线工具"><!--[--><iconify-icon class="vp-icon" icon="fa-solid:tools" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->在线工具<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/ubuntu-20.04-init/" aria-label="Ubuntu20.04 Init"><!--[--><iconify-icon class="vp-icon" icon="logos:ubuntu" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Ubuntu20.04 Init<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/vscode/" aria-label="VsCode"><!--[--><iconify-icon class="vp-icon" icon="material-icon-theme:vscode" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->VsCode<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/wsl/" aria-label="WSL"><!--[--><iconify-icon class="vp-icon" icon="skill-icons:windows-light" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->WSL<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/PPG007/PPG007.github.io" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-appearance-button" tabindex="-1" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon" name="outlook"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="vp-appearance-dropdown"><!----></div></button></div><!--[--><button type="button" class="slimsearch-button" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="slimsearch-placeholder">搜索</div><div class="slimsearch-key-hints"><kbd class="slimsearch-key">Ctrl</kbd><kbd class="slimsearch-key">S</kbd></div></button><!--]--><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><p class="vp-sidebar-header active"><!----><span class="vp-sidebar-title">Yii</span><!----></p><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/yii/docs/start.html" aria-label="入门"><!---->入门<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/yii/docs/structure.html" aria-label="应用结构"><!---->应用结构<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/yii/docs/request.html" aria-label="请求处理"><!---->请求处理<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/yii/docs/concepts.html" aria-label="关键概念"><!---->关键概念<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/yii/docs/database.html" aria-label="访问数据库"><!---->访问数据库<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/yii/docs/formatting.html" aria-label="显示数据"><!---->显示数据<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/yii/docs/restful.html" aria-label="Restful"><!---->Restful<!----></a></li></ul></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->应用结构</h1><div class="page-info"><!----><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2023/8/30</span><meta property="datePublished" content="2023-08-30T09:47:24.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 16 分钟</span><meta property="timeRequired" content="PT16M"></span><!----><!----></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="应用结构" tabindex="-1"><a class="header-anchor" href="#应用结构"><span>应用结构</span></a></h1><h2 id="入口脚本" tabindex="-1"><a class="header-anchor" href="#入口脚本"><span>入口脚本</span></a></h2><p>入口脚本是应用启动的第一步，一个应用只有一个入口脚本。终端用户的请求通过入口脚本实例化应用并将请求转发到应用。</p><p>入口脚本的工作：</p><ul><li>定义全局常量。</li><li>注册 Composer 自动加载器。</li><li>包含 Yii 类文件。</li><li>加载应用配置。</li><li>创建一个应用实例并启动。</li></ul><p>例如：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">&lt;</span><span style="--shiki-dark:#C678DD;--shiki-light:#000000;">?</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">php</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">comment</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">out</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">the</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">following</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">two</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">lines</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">when</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">deployed</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">to</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">production</span></span>
<span class="line"><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">defined</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;YII_DEBUG&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">or</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">define</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;YII_DEBUG&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#0000FF;">true</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">defined</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;YII_ENV&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">or</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">define</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;YII_ENV&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;dev&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">require</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#0000FF;">__DIR__</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;/../vendor/autoload.php&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">require</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#0000FF;">__DIR__</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;/../vendor/yiisoft/yii2/Yii.php&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$config</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">require</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#0000FF;">__DIR__</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;/../config/web.php&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">new</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">yii\web\</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Application</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$config</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">))-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">run</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>常量定义应该在入口脚本的开头，这样引入其他 PHP 文件时常量能够生效。</p></div><h2 id="应用" tabindex="-1"><a class="header-anchor" href="#应用"><span>应用</span></a></h2><p>应用主体是管理 Yii 应用系统整体结构和生命周期的对象。 每个 Yii 应用系统只能包含一个应用主体，应用主体在 入口脚本 中创建并能通过表达式 \Yii::$app 全局范围内访问。</p><p>在上面的入口脚本中， $config 包含了应用主体的配置。</p><p>在一个应用中，至少要配置两个属性：id 和 basePath，id 是用来区分其他应用的唯一表示 id，basePath 指定该应用的根目录。</p><h3 id="其他属性" tabindex="-1"><a class="header-anchor" href="#其他属性"><span>其他属性</span></a></h3><p>aliases：该属性允许用一个数组定义多个别名，数组的 key 为别名名称，值为对应路径，这可以替代 <code>Yii::setAlias()</code> 方法，例如配置文件中有如下定义：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;aliases&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;@baidu&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;https://baidu.com&#39;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后可以在代码中获取别名的内容：<code>Yii::getAlias(&#39;@baidu&#39;)</code>。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>如果是使用 yii 入口文件启动的 http 服务，yii 将会使用 PHP 内置的 web 服务器启动一个 http 服务，这个服务的入口文件实际上是 web/index.php 所以如果在 controller 中使用 getAlias 方法，那么别名应该定义在 web/index.php 中指定的配置文件里。</p></div><p>bootstrap：允许使用数组指定在启动阶段需要运行的组件，比如现在需要一个 JSON 字符串校验器，首先编写一个 JSON 字符串校验类，这个类需要继承 Validator 类：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">JsonValidator</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">extends</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Validator</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">private</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">isJson</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$str</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">is_string</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$str</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">&amp;&amp;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">is_object</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">json_decode</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$str</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">||</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">is_array</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">json_decode</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$str</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#0000FF;">true</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">))</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">&amp;&amp;</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">json_last_error</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">==</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#000000;">JSON_ERROR_NONE</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">));</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">validateAttribute</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$model</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$attribute</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">if</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">!</span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">$this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">isJson</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$model</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$attribute</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]))</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">$this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">addError</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$model</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$attribute</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;invalid</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">json</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">str&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接下来需要将这个验证器加入到 Yii 自身的验证器列表里，这样调用 validate 方法就可以验证 json 字符串了，首先定义一个类实现 BootstrapInterface 接口，然后将其配置到 bootstrap 中即可：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Register</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">implements</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">BootstrapInterface</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">bootstrap</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$app</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$customValidators</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;json&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;app\validator\JsonValidator&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Validator</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$builtInValidators</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">array_merge</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Validator</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$builtInValidators</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$customValidators</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>有多种方法可以将这个 Register 配置到 bootstrap 中。</p><p>第一种：应用组件 id。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;bootstrap&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;log&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;validator&#39;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span></span>
<span class="line"><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;components&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;validator&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;class&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;app\validator\Register&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第二种：类名。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;bootstrap&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;log&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;app\validator\Register&#39;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第三种：配置数组。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;bootstrap&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;log&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;class&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;app\validator\Register&#39;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第四种：匿名函数。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;bootstrap&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;log&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">new</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">\app\validator\</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Register</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>controllerMap：允许覆盖 Yii 的默认控制器 id 规则，规则示例：控制器 ID admin/post 对应的控制器类全名为 app\controllers\admin\PostController，可以配置 controllerNameSpace 属性修改这个类全名的前缀，这个属性默认值为 app\controllers。</p><p>现在需要将 <code>test/*</code> 匹配到 SiteController：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;controllerMap&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;test&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;app\controllers\SiteController&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>params：设置一个数组，指定可以全局访问的参数。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">配置文件</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$config</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;params&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">][</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;author&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;PPG007&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">controller</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Yii</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$app</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">params</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;author&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>timeZone：设置 PHP 运行环境中的默认时区，本质上就是调用 date_default_timezone_set 方法。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;timeZone&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;Asia/Shanghai&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="应用组件" tabindex="-1"><a class="header-anchor" href="#应用组件"><span>应用组件</span></a></h2><p>应用主体是服务定位器， 它部署一组提供各种不同功能的 应用组件 来处理请求。 例如，urlManager组件负责处理网页请求路由到对应的控制器。 db组件提供数据库相关服务等等。</p><p>下面来定义一个用于执行 rpc 调用的组件：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">RPC</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$userId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">__call</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$arguments</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;calling</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$name</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">with</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">params:</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">json_encode</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$arguments</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">$this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">userId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后将其注册到配置文件中：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;components&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;rpc&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;class&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;app\component\RPC&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;userId&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;PPG007&#39;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样 $userId 的值也传递过去了，当然也可以简写配置 <code>&#39;rpc&#39; =&gt; &#39;app\component\RPC&#39;</code>，然后可以在应用中进行调用：<code>Yii::$app-&gt;rpc-&gt;getMember(&#39;123&#39;)</code>。</p><h2 id="控制器" tabindex="-1"><a class="header-anchor" href="#控制器"><span>控制器</span></a></h2><p>控制器是 MVC 模式中的一部分， 是继承 yii\base\Controller 类的对象，负责处理请求和生成响应。 具体来说，控制器从应用主体 接管控制后会分析请求数据并传送到模型， 传送模型结果到视图，最后生成输出响应信息。</p><h3 id="动作" tabindex="-1"><a class="header-anchor" href="#动作"><span>动作</span></a></h3><p>控制器由操作组成，它是执行终端用户请求的最基础的单元，一个控制器可有一个或多个操作。</p><h3 id="路由" tabindex="-1"><a class="header-anchor" href="#路由"><span>路由</span></a></h3><p>终端用户通过路由寻找到动作，路由是一个包含以下部分的字符串：</p><ul><li>模块 id。</li><li>控制器 id。</li><li>操作 id。</li></ul><p>路由格式：<code>ControllerID/ActionID</code>，如果是模块下的控制器，格式为：<code>ModuleID/ControllerID/ActionID</code>。</p><h3 id="创建控制器" tabindex="-1"><a class="header-anchor" href="#创建控制器"><span>创建控制器</span></a></h3><p>在 WebApplication 中，控制器应该继承 <code>yii\web\Controller</code> 或其子类，ConsoleApplication 中的控制器应该继承 <code>yii\console\Controller</code> 或其子类。</p><p>控制器 id 应该仅包含英文小写字母、数字、下划线、中横杠和正斜杠。</p><p>控制器 id 根据以下规则衍生控制器类名：</p><ul><li>将用正斜杠区分的每个单词的第一个字母转为大写。如果控制器ID包含正斜杠， 只将最后的正斜杠后的部分第一个字母转为大写。</li><li>去掉中横杠，将正斜杠替换为反斜杠。</li><li>增加 Controller 后缀。</li><li>在前面增加控制器命名空间。</li></ul><p>假设 controllerNameSpace 属性设置为 <code>app\controllers</code>，那么有以下的对应关系：</p><ul><li><code>article</code> =&gt; <code>app\controllers\ArticleController</code>。</li><li><code>post-comment</code> =&gt; <code>app\controllers\PostCommentController</code>。</li><li><code>admin/post-comment</code> =&gt; <code>app\controllers\admin\PostCommentController</code>。</li><li><code>adminPanels/post-comment</code> =&gt; <code>app\controllers\adminPanels\PostCommentController</code>。</li></ul><div class="hint-container tip"><p class="hint-container-title">提示</p><p>控制器类必须能够被<a class="route-link" href="/yii/docs/concepts.html#%E7%B1%BB%E8%87%AA%E5%8A%A8%E5%8A%A0%E8%BD%BD">自动加载</a>。</p></div><p>通过 defaultRoute 属性可以设置默认控制器，不指定路由的请求将被这个控制器处理。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$config</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;defaultRoute&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;site/hello&#39;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建动作" tabindex="-1"><a class="header-anchor" href="#创建动作"><span>创建动作</span></a></h3><p>创建操作可简单地在控制器类中定义所谓的操作方法来完成，操作方法必须是以 action 开头的公有方法。 操作方法的返回值会作为响应数据发送给终端用户。</p><p>操作 id 应仅包含英文小写字母、数字、下划线和中横杠。</p><p>action 有两种类型：内联操作和独立操作，内联操作是定义在 controller 中的方法，独立操作是继承 <code>yii\base\Action</code> 或其子类的类。</p><h4 id="内联动作" tabindex="-1"><a class="header-anchor" href="#内联动作"><span>内联动作</span></a></h4><p>内联动作方法名称由操作 id 根据以下规则衍生：</p><ul><li>每个单词第一个字母转为大写。</li><li>去掉中横杠。</li><li>增加 action 前缀。</li></ul><p>例如：</p><ul><li><code>index</code> =&gt; <code>actionIndex</code>。</li><li><code>hello-world</code> =&gt; <code>actionHelloWorld</code>。</li></ul><div class="hint-container warning"><p class="hint-container-title">注意</p><p>操作方法名称大小写敏感，且方法必须是 public 的。</p></div><h4 id="独立动作" tabindex="-1"><a class="header-anchor" href="#独立动作"><span>独立动作</span></a></h4><p>下面来定义一个独立动作，首先创建 action 类：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">HelloWorldAction</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">extends</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Action</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">run</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;Hello</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">World&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>必须有 run 方法，Action 类的 runWithParams 方法会通过反射调用此方法。</p><p>然后在某个 controller 中重写 actions 方法：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">actions</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;hello-world&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;app\controllers\HelloWorldAction&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>独立操作的 id 可以包含任意字符。</p></div><h4 id="动作结果" tabindex="-1"><a class="header-anchor" href="#动作结果"><span>动作结果</span></a></h4><p>对于 WebApplication，返回值可以使任意数据，赋值给 <code>yii\web\Response::$data</code> 最终转换为字符串来展示响应内容。</p><p>对于 ConsoleApplication，返回值可以是整数，表示命令行下执行的 exit status 退出状态。</p><h4 id="动作参数" tabindex="-1"><a class="header-anchor" href="#动作参数"><span>动作参数</span></a></h4><p>内联操作和独立操作的 run 方法可以带参数，参数值从请求中获取，对于 WebApplication，每个动作参数的值从 $_GET 获得，对于 ConsoleApplication，参数从命令行参数获取。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">HelloWorldAction</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">extends</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Action</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">run</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$message</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$message</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#000000;">?</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$message</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#000000;">:</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;Hello</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">World&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>如果一个参数没有指定默认值，那么请求中必须包含这个参数，否则会报错。</p></div><p>如果希望一个参数是数组或者是其他类型，那么应该加入类型限制：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">HelloWorldAction</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">extends</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Action</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">run</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">array</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$message</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$message</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#000000;">?</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">json_encode</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$message</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#000000;">:</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;Hello</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">World&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="默认动作" tabindex="-1"><a class="header-anchor" href="#默认动作"><span>默认动作</span></a></h4><p>如果路由只包含了控制器 id，那么会使用对应控制器的默认动作，要指定默认动作，只要在控制器内定义 <code>public $defaultAction</code> 即可：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">MemberController</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">extends</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Controller</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$defaultAction</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;get&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">actionGet</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;member&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>默认情况下，defaultAction 值为 index。</p></div><h3 id="控制器生命周期" tabindex="-1"><a class="header-anchor" href="#控制器生命周期"><span>控制器生命周期</span></a></h3><p>处理一个请求时，应用主体会根据请求路由创建一个控制器，控制器经过以下生命周期完成请求：</p><ul><li>在控制器创建和配置后，调用 <code>yii\base\Controller::init()</code> 方法。</li><li>控制器根据请求操作 id 创建一个操作对象。 <ul><li>如果操作 id 没有指定，那么会使用默认动作。</li><li>如果在 actions 方法里找到独立操作，那么会创建一个独立操作。</li><li>如果操作 id 对应一个方法，那么会创建一个内联操作。</li><li>否则抛出 <code>yii\base\InvalidRouteException</code>。</li></ul></li><li>控制器按照顺序调用应用主体、模块（如果控制器属于模块）、控制器的 beforeAction 方法。 <ul><li>如果任意一个调用返回 false，后面未调用的 beforeAction 会跳过并且操作执行会被取消。</li><li>默认情况下每个 beforeAction 方法会触发一个 beforeAction 事件，在事件中可以追加事件处理操作。</li></ul></li><li>控制器执行操作，解析请求数据并填入到操作参数。</li><li>控制器按照顺序调用控制器、模块（如果控制器属于模块）、应用主体的 afterAction 方法，默认情况下每个 afterAction 方法会触发一个 afterAction 事件。</li><li>应用主体获取操作结果并赋值给响应。</li></ul><h2 id="模型" tabindex="-1"><a class="header-anchor" href="#模型"><span>模型</span></a></h2><p>模型是 MVC 的一部分，可以通过继承 <code>yii\base\Model</code> 或它的子类定义模型类。</p><h3 id="属性" tabindex="-1"><a class="header-anchor" href="#属性"><span>属性</span></a></h3><p>每个属性是模型的公有属性，默认情况下所有的非静态公有成员变量都是属性，可以通过 attributes() 方法指定模型所拥有的属性：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Member</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">extends</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Model</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">attributes</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;name&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当属性显示或获取输入时，经常要显示属性的相关标签，嘉定一个属性名为 firstName，在展示的地方可能需要展示为 First Name，可以重写 getAttributeLabel 方法实现，默认情况下标签是将驼峰式大小写变量名转换为多个首字母大写的单词。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Member</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">extends</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Model</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$nickname</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">attributeLabels</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;nickname&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;name&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="场景" tabindex="-1"><a class="header-anchor" href="#场景"><span>场景</span></a></h3><p>模型可能在多个场景下使用，不同场景中可能会使用不同的业务规则和逻辑，比如有的字段在不同场景中的校验规则可能不同。可以通过 $scenario 属性设置场景，通过重写 scenarios() 方法来自定义行为：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Member</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">extends</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Model</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$nickname</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$email</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">const</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">SCENARIO_LOGIN</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;login&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">const</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">SCENARIO_REGISTER</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;register&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">rules</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;nickname&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;required&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;email&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;email&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;email&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;required&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">scenarios</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">self</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#D19A66;--shiki-light:#000000;">SCENARIO_LOGIN</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;nickname&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;email&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">self</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#D19A66;--shiki-light:#000000;">SCENARIO_REGISTER</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;email&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">在使用时需要指定场景，指定场景后，只有这个场景下包含的字段才会校验</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">actionGet</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">new</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">email</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;123@qq.com&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">scenario</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#D19A66;--shiki-light:#000000;">SCENARIO_LOGIN</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">validate</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#000000;">?</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;true&#39;</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#000000;">:</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;false&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>默认场景会包含在 rules 中定义了规则的属性。</p><h3 id="验证规则" tabindex="-1"><a class="header-anchor" href="#验证规则"><span>验证规则</span></a></h3><p>当模型接收到数据，数据应当满足某种规则，如果某个属性的值不满足对应的规则，那么返回相应的错误。</p><p>调用 validate() 方法来验证接收到的数据，该方法使用 rules 方法中定义的规则来验证每个属性，如果没有错误这个方法将会返回 true，否则会将错误保存在 $errors 字段中并返回 false，例如：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">actionGet</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">new</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">email</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;123@qq.com&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">scenario</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#D19A66;--shiki-light:#000000;">SCENARIO_LOGIN</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">validate</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#000000;">?</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;true&#39;</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#000000;">:</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">json_encode</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">errors</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>一条规则可以用来验证一个或多个属性，一个属性可以有多个规则，如果希望一条规则只在某个场景下使用，可以指定 on 属性，例如：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">rules</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;nickname&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;required&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;on&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;register&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;email&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;email&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;email&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;required&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的例子中只有设置 $scenario 为 register 时才会校验 nickname。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>一个属性只有在 scenarios 中定义并且在 rules 中存在规则的情况下才会被校验。</p></div><h3 id="块赋值" tabindex="-1"><a class="header-anchor" href="#块赋值"><span>块赋值</span></a></h3><p>块赋值只需要一行代码将所有输入填充到一个模型：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">actionGet</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$data</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;nickname&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;PPG007&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;email&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;1658272229@qq.com&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">new</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">scenario</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;register&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">attributes</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$data</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">json_encode</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>块赋值只会应用在 scenarios 方法包含的属性上，上面的例子中如果不指定场景则 nickname 不会被赋值（因为 nickname 在 rules 中设置了 on）。为此，可以提供一个 safe 验证器来声明哪些属性不需要被验证。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">rules</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;nickname&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;email&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;safe&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><p>在某些情况下，可能会想验证一个属性但不想让其是安全属性，可以在 scenarios 方法中属性名前加一个叹号：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">scenarios</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;default&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;nickname&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;!email&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>等价于：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">rules</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;nickname&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;!email&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;safe&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这种情况下块赋值将不会对 email 生效，必须手动赋值：<code>$member-&gt;email = $data[&#39;email&#39;];</code>。</p><h3 id="数据导出" tabindex="-1"><a class="header-anchor" href="#数据导出"><span>数据导出</span></a></h3><h4 id="字段" tabindex="-1"><a class="header-anchor" href="#字段"><span>字段</span></a></h4><p>字段是模型通过调用 toArray() 方法生成的数组的单元名，默认情况下，字段名对应属性名，可以通过重写 fields 或 extraFields 方法来改变这种行为：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">extraFields</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;email&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">fields</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;user&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;nickname&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;message&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">$this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">email</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">$this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">nickname</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">使用处</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$member</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">toArray</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">([],</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;email&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">])</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>extraFields 方法返回的字段必须在 toArray 方法的第二个参数中指定才会出现在 toArray 的结果中。</p></div><h2 id="模块" tabindex="-1"><a class="header-anchor" href="#模块"><span>模块</span></a></h2><p>模块是独立的软件单元，可以视为小型应用主体，但是不能单独部署，必须属于某个应用主体。</p><h3 id="创建模块" tabindex="-1"><a class="header-anchor" href="#创建模块"><span>创建模块</span></a></h3><p>每个模块都有一个继承 <code>yii\base\Module</code> 的模块类，该文件放在模块的最外层目录下，并且能被自动加载，当一个模块被访问，会创建该模块类的唯一实例来帮助模块内代码共享数据和组件。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">&lt;</span><span style="--shiki-dark:#C678DD;--shiki-light:#000000;">?</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">php</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">namespace</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">app\modules\management</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Module</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">extends</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">\yii\base\</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Module</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">init</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">parent</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">init</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>init 中可以再读取、设置配置等。</p><p>然后在应用主体的配置文件中增加：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;modules&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">指定模块</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">id，请求时格式为</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">moduleId/ControllerId/ActionId</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;management&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;class&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;app\modules\management\Module&#39;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后就可以访问 controller 了：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">Management/AuditLogController</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">http://localhost:8888/index.php?r=management/audit-log/search</span></span>
<span class="line"><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">&lt;</span><span style="--shiki-dark:#C678DD;--shiki-light:#000000;">?</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">php</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">namespace</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">app\modules\management\controllers</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">AuditLogController</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">extends</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">\yii\web\</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Controller</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">actionSearch</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;123&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用模块" tabindex="-1"><a class="header-anchor" href="#使用模块"><span>使用模块</span></a></h3><p>在模块中，可能需要通过模块类的实例来访问模块 id 等，可以用以下方式获取模块实例：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">首先在模块内定义一个</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">param</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Module</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">extends</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">\yii\base\</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Module</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">init</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">parent</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">init</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">$this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">params</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;testParam&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;management&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">然后在模块内访问：</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Yii</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$app</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">controller</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">module</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">params</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;testParam&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Module</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getInstance</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">params</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;testParam&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Yii</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$app</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getModule</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;management&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">params</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;testParam&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的模块中定义的 param 只能在模块内部获取，因为只有访问模块时才会创建模块类，可以在应用主体配置中的 bootstrap 设置，使得每次请求都会加载某个模块：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;bootstrap&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;management&#39;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样，任意位置都可以获取到这个模块的内容了。</p><h3 id="模块嵌套" tabindex="-1"><a class="header-anchor" href="#模块嵌套"><span>模块嵌套</span></a></h3><p>模块可以无限极嵌套，一个模块可以包含另一个模块，子模块必须在父模块的 modules 属性中声明，例如：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">$this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">modules</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;sub&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;class&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;app\modules\management\modules\sub\Module&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>嵌套模块中的控制器的路由应该包含所有祖先模块的 id，例如：<code>http://localhost:8888/index.php?r=management/sub/sub/get</code>。</p></div><h3 id="从模块内部访问组件" tabindex="-1"><a class="header-anchor" href="#从模块内部访问组件"><span>从模块内部访问组件</span></a></h3><p>Yii 应用程序本质上是一个模块树，由于每一个模块都是服务定位器，所以子模块有权限访问父模块，这允许使用 <code>$this-&gt;get(&#39;rpc&#39;)</code> 而不是使用根服务 <code>Yii::$app-&gt;get(&#39;rpc&#39;)</code>，这样可以在子模块中覆盖应用主体的配置。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">init</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">parent</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">init</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">$this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">components</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;rpc&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;class&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">RPC</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;userId&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;subUser&#39;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样，在子模块中使用 Module instance get 获取 rpc 组件时，rpc 组件类中的 userId 和应用主体中配置的会不同。</p><h2 id="过滤器" tabindex="-1"><a class="header-anchor" href="#过滤器"><span>过滤器</span></a></h2><p>过滤器是在控制器动作执行之前或者之后执行的对象，例如权限控制等功能的实现，过滤器可包含预过滤（发生在动作之前）或后过滤（发生在动作之后），也可以同时包含这两个。</p><h3 id="使用过滤器" tabindex="-1"><a class="header-anchor" href="#使用过滤器"><span>使用过滤器</span></a></h3><p>过滤器本质上是特殊的行为，所以使用过滤器和使用行为一样，可以在控制类中重写 behaviors 方法来声明过滤器：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">behaviors</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;class&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;yii\filters\HttpCache&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;only&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;index&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;view&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;lastModified&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$action</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$params</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$q</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">new</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">\yii\db\</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Query</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$q</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">from</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;user&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">max</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;updated_at&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">},</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">];</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>控制器类的过滤器默认应用到该类的所有动作，可以配置 only 属性明确指定应用过滤器的那些动作，上面的例子中只会应用到 actionIndex 和 actionView，也可以使用 except 属性指定一些动作不适用过滤器。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>如果是在应用主体或者模块的配置中（behaviors 数组）声明过滤器，那么 only 和 except 属性中应该使用路由而不是 actionId，因为模块或者应用主体中只用 actionId 不一定能唯一确定一个具体的动作。</p></div><p>当一个动作配置了多个过滤器时，根据以下规则先后执行：</p><ul><li>预过滤： <ul><li>按顺序执行应用主体中 behaviors 列出的过滤器。</li><li>按顺序执行模块中 behaviors 列出的过滤器。</li><li>按顺序执行控制器中 behaviors 列出的过滤器。</li><li>如果任意过滤器终止动作执行，后面的预过滤器和后过滤器都不会再执行。</li></ul></li><li>成功通过预过滤后执行动作。</li><li>后过滤： <ul><li>倒序执行控制器中 behaviors 列出的过滤器。</li><li>倒序执行模块中 behaviors 列出的过滤器。</li><li>倒序执行应用主体中 behaviors 列出的过滤器。</li></ul></li></ul><h3 id="创建过滤器" tabindex="-1"><a class="header-anchor" href="#创建过滤器"><span>创建过滤器</span></a></h3><p>要创建一个过滤器，需要创建一个继承 <code>yii\base\ActionFilter</code> 类并重写 beforeAction 或 afterAction 方法的类，这两个方法分别对应预过滤和后过滤，两个方法返回布尔值，如果返回 false，那么之后的过滤器和动作不会再执行。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">&lt;</span><span style="--shiki-dark:#C678DD;--shiki-light:#000000;">?</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">php</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">namespace</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">app\filters</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">use</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">yii\base\</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">ActionFilter</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">AccessLogFilter</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">extends</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">ActionFilter</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$module</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">beforeAction</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$action</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">\</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Yii</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">warning</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;before</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">action</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">$this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">module</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$action</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">id</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">parent</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">beforeAction</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$action</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">afterAction</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$action</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$result</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">\</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Yii</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">warning</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;after</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">action</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">$this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">module</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$action</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">id</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">parent</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">afterAction</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$action</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$result</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后分别在应用主体和各级模块中引入这个过滤器：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">config/web.php</span></span>
<span class="line"><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;as</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">accessLogFilter&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;class&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;app\filters\AccessLogFilter&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;module&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;root&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">modules/management/Module.php</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">behaviors</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">array_merge</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">parent</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">behaviors</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(),</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;accessLog&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;class&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">AccessLogFilter</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;module&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;management&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">modules/management/modules/sub/Module.php</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">behaviors</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#795E26;">array_merge</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">parent</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">behaviors</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(),</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;accessLog&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">[</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;class&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">AccessLogFilter</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;module&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;sub&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="核心过滤器" tabindex="-1"><a class="header-anchor" href="#核心过滤器"><span>核心过滤器</span></a></h3><p>一些内置的过滤器，例如权限控制，缓存、限流、HTTP 方法校验、CORS 等，<a href="https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-filters#core-filters" target="_blank" rel="noopener noreferrer">doc</a>。</p><h2 id="扩展" tabindex="-1"><a class="header-anchor" href="#扩展"><span>扩展</span></a></h2><p>一些 Yii 维护的扩展，包含 redis、MongoDB 等使用的支持，<a href="https://www.yiiframework.com/doc/guide/2.0/zh-cn/structure-extensions#core-extensions" target="_blank" rel="noopener noreferrer">doc</a>。</p></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/PPG007/PPG007.github.io/edit/main/docs/yii/docs/structure.md" aria-label="编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">最近更新</span><time class="vp-meta-info" datetime="2025-05-13T05:52:32.000Z" data-allow-mismatch>2025/5/13 05:52</time></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: koston.zhuang@maiscrm.com">Koston Zhuang</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/yii/docs/start.html" aria-label="入门"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->入门</div></a><a class="route-link auto-link next" href="/yii/docs/request.html" aria-label="请求处理"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">请求处理<!----></div></a></nav><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;"><div style="display: flex;align-items: center;justify-content: center;height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!----><!--]--></main><!--]--><!----></div><!--]--><!--]--><!--[--><!----><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-rQI8KFp-.js" defer></script>
  </body>
</html>
