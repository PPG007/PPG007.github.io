import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,d as a,o as n}from"./app-UKhqlS50.js";const t="/assets/image-20210823151117278-Dac-yXmd.png",r={};function l(p,e){return n(),i("div",null,e[0]||(e[0]=[a(`<h1 id="安装-zookeeper" tabindex="-1"><a class="header-anchor" href="#安装-zookeeper"><span>安装 ZooKeeper</span></a></h1><h2 id="基础安装" tabindex="-1"><a class="header-anchor" href="#基础安装"><span>基础安装</span></a></h2><p>下载ZooKeeper：<a href="https://www.apache.org/dyn/closer.lua/zookeeper/zookeeper-3.6.3/apache-zookeeper-3.6.3-bin.tar.gz" target="_blank" rel="noopener noreferrer">Zookeeper</a>。</p><p>上传到服务器解压，进入解压后的目录，进入 conf 目录，编辑 <code>zoo-sample.cfg</code>：</p><p>修改数据快照目录：</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-sh"><span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">dataDir</span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">/opt/zookeeper</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>重命名配置文件为 <code>zoo.cfg</code>：</p><p>进入 bin 目录执行：</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-sh"><span class="line"><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">./zkServer.sh</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">start#启动zookeeper</span></span>
<span class="line"><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">./zkServer.sh</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">status#查看zookeeper状态</span></span>
<span class="line"><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">./zkServer.sh</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">stop#停止zookeeper</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动客户端：</p><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-sh"><span class="line"><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">./zkCli.sh</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h2 id="配置参数" tabindex="-1"><a class="header-anchor" href="#配置参数"><span>配置参数</span></a></h2><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-sh"><span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">tickTime</span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">2000</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">#心跳时间，毫秒</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">initLimit</span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">10</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">#Leader和Follower初始连接时能容忍的最多心跳数</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">syncLimit</span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">5</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">#Leader和Follower建立连接后的通信最大心跳数</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">dataDir</span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">/opt/zookeeper</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">#数据目录</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">clientPort</span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">2181</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">#客户端连接端口号</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="集群安装" tabindex="-1"><a class="header-anchor" href="#集群安装"><span>集群安装</span></a></h2><p>zookeeper 最好部署奇数台服务器，首先在每个服务器上都修改配置文件，指定数据目录并启动，启动后在指定的数据目录中创建 <code>myid</code> 文件，文件中输入一个整数，就像是数据库主键一样，每个服务器不同，例如这里将三台服务器分别配置为 1、2、3，停掉 zookeeper，修改配置文件，在配置文件中添加如下内容，这里以第三台服务器为例，格式为 <code>server.[id]=host:port1:port2</code>，host 是 IP 地址，端口号一是 Follower 与 Leader 交换信息端口，端口二是执行选举时的端口。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>自身要使用 <code>0.0.0.0</code> 而不是 <code>127.0.0.1</code>。</p></div><div class="language-sh line-numbers-mode" data-highlighter="shiki" data-ext="sh" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-sh"><span class="line"><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">server.1</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">=39.107.112.172:2888:3888</span></span>
<span class="line"><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">server.2</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">=150.158.153.216:2888:3888</span></span>
<span class="line"><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">server.3</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">=0.0.0.0:2888:3888</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在三台服务器上分别执行启动命令然后查看状态可以看到：</p><p><img src="`+t+'" alt="image-20210823151117278"></p><p>1 号服务器此时成为 Leader。</p>',20)]))}const d=s(r,[["render",l]]),k=JSON.parse('{"path":"/zookeeper/docs/start.html","title":"安装 ZooKeeper","lang":"zh-CN","frontmatter":{"prev":{"text":"首页","link":"/zookeeper"},"description":"安装 ZooKeeper 基础安装 下载ZooKeeper：Zookeeper。 上传到服务器解压，进入解压后的目录，进入 conf 目录，编辑 zoo-sample.cfg： 修改数据快照目录： 重命名配置文件为 zoo.cfg： 进入 bin 目录执行： 启动客户端： 配置参数 集群安装 zookeeper 最好部署奇数台服务器，首先在每个服务器上...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"安装 ZooKeeper\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2022-08-15T09:32:39.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://ppg007.github.io/zookeeper/docs/start.html"}],["meta",{"property":"og:site_name","content":"PPG007 的文档"}],["meta",{"property":"og:title","content":"安装 ZooKeeper"}],["meta",{"property":"og:description","content":"安装 ZooKeeper 基础安装 下载ZooKeeper：Zookeeper。 上传到服务器解压，进入解压后的目录，进入 conf 目录，编辑 zoo-sample.cfg： 修改数据快照目录： 重命名配置文件为 zoo.cfg： 进入 bin 目录执行： 启动客户端： 配置参数 集群安装 zookeeper 最好部署奇数台服务器，首先在每个服务器上..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2022-08-15T09:32:39.000Z"}],["meta",{"property":"article:modified_time","content":"2022-08-15T09:32:39.000Z"}]]},"git":{"createdTime":1640699484000,"updatedTime":1660555959000,"contributors":[{"name":"PPG007","username":"PPG007","email":"1658272229@com请求","commits":1,"url":"https://github.com/PPG007"},{"name":"Koston Zhuang","username":"","email":"koston.zhuang@maiscrm.com","commits":1}]},"readingTime":{"minutes":1.34,"words":403},"filePathRelative":"zookeeper/docs/start.md","excerpt":"\\n<h2>基础安装</h2>\\n<p>下载ZooKeeper：<a href=\\"https://www.apache.org/dyn/closer.lua/zookeeper/zookeeper-3.6.3/apache-zookeeper-3.6.3-bin.tar.gz\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">Zookeeper</a>。</p>","autoDesc":true}');export{d as comp,k as data};
