import{_ as k}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c,d as e,e as t,w as n,r as d,o as r,a as s,b as i}from"./app-UKhqlS50.js";const B={};function g(y,a){const h=d("CodeTabs");return r(),c("div",null,[a[8]||(a[8]=e(`<h1 id="中间件" tabindex="-1"><a class="header-anchor" href="#中间件"><span>中间件</span></a></h1><p>自定义中间件通常放在 <code>app/Http/Middleware</code> 目录。</p><h2 id="定义中间件" tabindex="-1"><a class="header-anchor" href="#定义中间件"><span>定义中间件</span></a></h2><p>使用 <code>make:middleware</code> 命令可以创建一个中间件：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-shell"><span class="line"><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">php</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">artisan</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">make:middleware</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">Auth</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>可以在这个中间件中添加限定，请求 Headers 中必须包含指定的 secret 才能继续执行，否则抛出 401：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Auth</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">/**</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">*</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">Handle</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">an</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">incoming</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">request.</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">*</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">*</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-dark-font-style:italic;--shiki-light:#0000FF;--shiki-light-font-style:inherit;">@param</span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">\\</span><span style="--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;--shiki-light:#267F99;--shiki-light-font-style:inherit;">Closure</span><span style="--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">(</span><span style="--shiki-dark:#ABB2BF;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">\\Illuminate\\Http\\</span><span style="--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;--shiki-light:#267F99;--shiki-light-font-style:inherit;">Request</span><span style="--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">):</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">(\\Symfony\\Component\\HttpFoundation\\Response)</span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">$next</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">*/</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">handle</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Request</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$request</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Closure</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$next</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">):</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Response</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$secret</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$request</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">header</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;x-secret&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">if</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$secret</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">!==</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;PPG</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">test</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">secret&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">response</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">json</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">([</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;message&#39;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=&gt;</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;Unauthorized&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">],</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#098658;">401</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$next</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$request</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当中间件需要继续 执行时，需要调用 <code>$next</code> 参数并传入 <code>$request</code> 参数。</p><p>通过 <code>$next</code> 和中间件的逻辑顺序的调整，可以实现前置中间件和后置中间件。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>所有的中间件都会经过容器解析，这意味着可以在构造函数里注入依赖。</p></div><h2 id="注册中间件" tabindex="-1"><a class="header-anchor" href="#注册中间件"><span>注册中间件</span></a></h2><h3 id="全局中间件" tabindex="-1"><a class="header-anchor" href="#全局中间件"><span>全局中间件</span></a></h3><p>全局中间件会在每个 HTTP 请求中执行，可以在 <code>bootstrap/app.php</code> 中使用 <code>withMiddleware</code> 方法注册：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">withMiddleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Middleware</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$middleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$middleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">append</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Auth</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>append</code> 方法会将指定的中间件添加到中间件列表的最后，如果希望从列表头部添加，可以使用 <code>prepend</code> 方法：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">withMiddleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Middleware</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$middleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$middleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">prepend</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Auth</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="路由级中间件" tabindex="-1"><a class="header-anchor" href="#路由级中间件"><span>路由级中间件</span></a></h3><p>如果想给单个路由添加中间件，可以使用 <code>middleware</code> 方法：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Route</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">controller</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">DemoController</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">group</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Route</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">get</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;/members/{id}&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;getMember&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;get&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Route</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">post</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;/members&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;createMember&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;create&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">middleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">([</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Auth</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以给路由组添加中间件：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Route</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">controller</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">DemoController</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">middleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">([</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Auth</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">])-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">group</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Route</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">get</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;/members/{id}&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;getMember&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;get&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Route</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">post</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;/members&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;createMember&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;create&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>给路由组添加中间件时，<code>middleware</code> 方法要在 <code>group</code> 方法之前调用。</p></div><p>给一组路由添加中间件时，如果组中的某个路由不需要中间件，那么可以使用 <code>withoutMiddleware</code> 方法：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Route</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">controller</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">DemoController</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">middleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">([</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Auth</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">])-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">group</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Route</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">get</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;/members/{id}&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;getMember&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;get&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">withoutMiddleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">([</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Auth</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Route</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">post</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;/members&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;createMember&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;create&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container important"><p class="hint-container-title">重要</p><p>移除中间件不适用于全局中间件。</p></div><h3 id="中间件组" tabindex="-1"><a class="header-anchor" href="#中间件组"><span>中间件组</span></a></h3><p>将中间件分组后可以更简单的分配给路由，可以在 <code>bootstrap/app.php</code> 中使用 <code>appendToGroup</code> 方法：</p>`,27)),t(h,{data:[{id:"app.php"},{id:"api.php"},{id:"app.php"},{id:"api.php"}],"tab-id":"group-middleware-group"},{title0:n(({value:p,isActive:l})=>a[0]||(a[0]=[i("app.php")])),title1:n(({value:p,isActive:l})=>a[1]||(a[1]=[i("api.php")])),title2:n(({value:p,isActive:l})=>a[2]||(a[2]=[i("app.php")])),title3:n(({value:p,isActive:l})=>a[3]||(a[3]=[i("api.php")])),tab0:n(({value:p,isActive:l})=>a[4]||(a[4]=[s("div",{class:"language-php line-numbers-mode","data-highlighter":"shiki","data-ext":"php",style:{"--shiki-dark":"#abb2bf","--shiki-light":"#000000","--shiki-dark-bg":"#282c34","--shiki-light-bg":"#FFFFFF"}},[s("pre",{class:"shiki shiki-themes one-dark-pro light-plus vp-code"},[s("code",{class:"language-php"},[s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"->"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"withMiddleware"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#C678DD","--shiki-light":"#0000FF"}},"function"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"Middleware"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#E06C75","--shiki-light":"#001080"}},"$middleware"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},")"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"{")]),i(`
`),s("span",{class:"line"},[s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#E06C75","--shiki-light":"#001080"}},"$middleware"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"->"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"appendToGroup"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'test'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},","),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"[")]),i(`
`),s("span",{class:"line"},[s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"First"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"::"),s("span",{style:{"--shiki-dark":"#C678DD","--shiki-light":"#0000FF"}},"class"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"Second"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"::"),s("span",{style:{"--shiki-dark":"#C678DD","--shiki-light":"#0000FF"}},"class"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"]);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"})")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])),tab1:n(({value:p,isActive:l})=>a[5]||(a[5]=[s("div",{class:"language-php line-numbers-mode","data-highlighter":"shiki","data-ext":"php",style:{"--shiki-dark":"#abb2bf","--shiki-light":"#000000","--shiki-dark-bg":"#282c34","--shiki-light-bg":"#FFFFFF"}},[s("pre",{class:"shiki shiki-themes one-dark-pro light-plus vp-code"},[s("code",{class:"language-php"},[s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"Route"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"::"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"controller"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"DemoController"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"::"),s("span",{style:{"--shiki-dark":"#C678DD","--shiki-light":"#0000FF"}},"class"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},")->"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"middleware"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'test'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},")->"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"group"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#C678DD","--shiki-light":"#0000FF"}},"function"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"()"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"{")]),i(`
`),s("span",{class:"line"},[s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"Route"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"::"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"get"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'/members/{id}'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},","),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'getMember'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},")->"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"name"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'get'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"Route"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"::"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"post"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'/members'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},","),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'createMember'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},")->"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"name"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'create'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"});")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),s("a",{class:"header-anchor",href:"#中间件别名"},[s("span",null,"中间件别名")],-1)])),tab2:n(({value:p,isActive:l})=>a[6]||(a[6]=[s("div",{class:"language-php line-numbers-mode","data-highlighter":"shiki","data-ext":"php",style:{"--shiki-dark":"#abb2bf","--shiki-light":"#000000","--shiki-dark-bg":"#282c34","--shiki-light-bg":"#FFFFFF"}},[s("pre",{class:"shiki shiki-themes one-dark-pro light-plus vp-code"},[s("code",{class:"language-php"},[s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"->"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"withMiddleware"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#C678DD","--shiki-light":"#0000FF"}},"function"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"Middleware"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#E06C75","--shiki-light":"#001080"}},"$middleware"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},")"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"{")]),i(`
`),s("span",{class:"line"},[s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#E06C75","--shiki-light":"#001080"}},"$middleware"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"->"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"alias"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"([")]),i(`
`),s("span",{class:"line"},[s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'a'"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"=>"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"Auth"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"::"),s("span",{style:{"--shiki-dark":"#C678DD","--shiki-light":"#0000FF"}},"class"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'f'"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"=>"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"First"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"::"),s("span",{style:{"--shiki-dark":"#C678DD","--shiki-light":"#0000FF"}},"class"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'s'"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"=>"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"Second"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"::"),s("span",{style:{"--shiki-dark":"#C678DD","--shiki-light":"#0000FF"}},"class"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"]);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"})")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])),tab3:n(({value:p,isActive:l})=>a[7]||(a[7]=[s("div",{class:"language-php line-numbers-mode","data-highlighter":"shiki","data-ext":"php",style:{"--shiki-dark":"#abb2bf","--shiki-light":"#000000","--shiki-dark-bg":"#282c34","--shiki-light-bg":"#FFFFFF"}},[s("pre",{class:"shiki shiki-themes one-dark-pro light-plus vp-code"},[s("code",{class:"language-php"},[s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"Route"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"::"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"controller"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"DemoController"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"::"),s("span",{style:{"--shiki-dark":"#C678DD","--shiki-light":"#0000FF"}},"class"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},")->"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"middleware"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"(["),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'a'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},","),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'f'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},","),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'s'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"])->"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"group"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#C678DD","--shiki-light":"#0000FF"}},"function"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"()"),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"{")]),i(`
`),s("span",{class:"line"},[s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"Route"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"::"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"get"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'/members/{id}'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},","),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'getMember'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},")->"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"name"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'get'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#E5C07B","--shiki-light":"#267F99"}},"Route"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"::"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"post"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'/members'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},","),s("span",{class:"space"}," "),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'createMember'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},")->"),s("span",{style:{"--shiki-dark":"#61AFEF","--shiki-light":"#795E26"}},"name"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"("),s("span",{style:{"--shiki-dark":"#98C379","--shiki-light":"#A31515"}},"'create'"),s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-dark":"#ABB2BF","--shiki-light":"#000000"}},"});")])])]),s("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1)])),_:1}),a[9]||(a[9]=e(`<h3 id="中间件排序" tabindex="-1"><a class="header-anchor" href="#中间件排序"><span>中间件排序</span></a></h3><p>如果需要中间件按顺序执行，那么可以在 <code>bootstrap/app.php</code> 中使用 <code>priority</code> 方法：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">withMiddleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Middleware</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$middleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$middleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">priority</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">([</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">First</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Second</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Auth</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">]);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">})</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="中间件参数" tabindex="-1"><a class="header-anchor" href="#中间件参数"><span>中间件参数</span></a></h2><p>中间件还可以接收参数，参数会在 <code>handle</code> 方法中的 $next 参数后作为参数传入：</p>`,5)),t(h,{data:[],"tab-id":"group-middleware-param"}),a[10]||(a[10]=e(`<p>如果有多个参数，可以使用 <code>:</code> 分隔：</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Route</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">controller</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">DemoController</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">middleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">([</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;a&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;f:demo,test&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;s&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">])-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">group</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Route</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">get</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;/members/{id}&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;getMember&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;get&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Route</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">::</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">post</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;/members&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;createMember&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)-&gt;</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&#39;create&#39;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">});</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="终止后执行中间件" tabindex="-1"><a class="header-anchor" href="#终止后执行中间件"><span>终止后执行中间件</span></a></h2><p>如果需要在响应发出后继续执行一些逻辑，可以在中间件中定义 <code>terminate</code> 方法，此方法将在使用了 FastCGI 的情况下，在响应发送后自动被调用。</p><div class="language-php line-numbers-mode" data-highlighter="shiki" data-ext="php" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-php"><span class="line"><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">&lt;</span><span style="--shiki-dark:#C678DD;--shiki-light:#000000;">?</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">php</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">namespace</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Illuminate\\Session\\Middleware</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">use</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Closure</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">use</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">Illuminate\\Http\\</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Request</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">use</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">Symfony\\Component\\HttpFoundation\\</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Response</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">TerminatingMiddleware</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">/**</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">*</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">Handle</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">an</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">incoming</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">request.</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">*</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">*</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-dark-font-style:italic;--shiki-light:#0000FF;--shiki-light-font-style:inherit;">@param</span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">\\</span><span style="--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;--shiki-light:#267F99;--shiki-light-font-style:inherit;">Closure</span><span style="--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">(</span><span style="--shiki-dark:#ABB2BF;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">\\Illuminate\\Http\\</span><span style="--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;--shiki-light:#267F99;--shiki-light-font-style:inherit;">Request</span><span style="--shiki-dark:#E5C07B;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">):</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">(\\Symfony\\Component\\HttpFoundation\\Response)</span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">$next</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">*/</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">handle</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Request</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$request</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Closure</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$next</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">):</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Response</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$next</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$request</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">/**</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">*</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">Handle</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">tasks</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">after</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">the</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">response</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">has</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">been</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">sent</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">to</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">the</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">browser.</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">*/</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">function</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">terminate</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Request</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$request</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Response</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">$response</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">):</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#0000FF;">void</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">//</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">...</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>terminate</code> 方法同时接收请求和响应，终止后执行中间件应该添加到全局中间件中。</p><p>在中间件上调用 <code>terminate</code> 方法时，Laravel 将会解析一个新的中间件实例，如果要在调用 <code>handle</code> 和 <code>terminate</code> 方法中使用相同的实例，应该在 AppServiceProvider 中将这个中间件注册为单例。</p>`,7))])}const A=k(B,[["render",g]]),u=JSON.parse('{"path":"/laravel/docs/middleware.html","title":"中间件","lang":"zh-CN","frontmatter":{"description":"中间件 自定义中间件通常放在 app/Http/Middleware 目录。 定义中间件 使用 make:middleware 命令可以创建一个中间件： 可以在这个中间件中添加限定，请求 Headers 中必须包含指定的 secret 才能继续执行，否则抛出 401： 当中间件需要继续 执行时，需要调用 $next 参数并传入 $request 参数。...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"中间件\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-05-21T02:30:05.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://ppg007.github.io/laravel/docs/middleware.html"}],["meta",{"property":"og:site_name","content":"PPG007 的文档"}],["meta",{"property":"og:title","content":"中间件"}],["meta",{"property":"og:description","content":"中间件 自定义中间件通常放在 app/Http/Middleware 目录。 定义中间件 使用 make:middleware 命令可以创建一个中间件： 可以在这个中间件中添加限定，请求 Headers 中必须包含指定的 secret 才能继续执行，否则抛出 401： 当中间件需要继续 执行时，需要调用 $next 参数并传入 $request 参数。..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-21T02:30:05.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-21T02:30:05.000Z"}]]},"git":{"createdTime":1747734907000,"updatedTime":1747794605000,"contributors":[{"name":"Koston Zhuang","username":"","email":"koston.zhuang@maiscrm.com","commits":2}]},"readingTime":{"minutes":3.7,"words":1110},"filePathRelative":"laravel/docs/middleware.md","excerpt":"\\n<p>自定义中间件通常放在 <code>app/Http/Middleware</code> 目录。</p>","autoDesc":true}');export{A as comp,u as data};
