import{z as te,a3 as $,a5 as D,f as P,a6 as q,a7 as G,g as m,W as L,aP as ae,az as j,h as A,o as x,w as Q,aK as se,a as M,aF as le,ac as B,u as g,ab as O,aL as oe,be as re,Q as J,c as Z,e as F,aB as ne,a8 as k,a4 as ie,bh as U,K as I,af as ce,aO as ue,bi as fe,a2 as ve,ao as V,bj as de,aA as me,aa as pe,ad as he,a9 as be,ae as ye,aS as ge,b4 as Se}from"./app-rQI8KFp-.js";import{u as W,a as we}from"./URL.vue_vue_type_style_index_0_scoped_63a2b590_lang-76B7habx.js";import{t as ze}from"./event-BE20p1dL.js";import{b as Ee}from"./index-B-lsNp-L.js";function je(){if(!arguments.length)return[];var t=arguments[0];return te(t)?t:[t]}const C=4,_e={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},He=({move:t,size:a,bar:s})=>({[s.size]:a,transform:`translate${s.axis}(${t}%)`}),K=Symbol("scrollbarContextKey"),Te=$({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Ce="Thumb",Le=P({__name:"thumb",props:Te,setup(t){const a=t,s=q(K),l=G("scrollbar");s||ze(Ce,"can not inject scrollbar context");const i=m(),c=m(),f=m({}),v=m(!1);let p=!1,b=!1,r=J?document.onselectstart:null;const o=L(()=>_e[a.vertical?"vertical":"horizontal"]),n=L(()=>He({size:a.size,move:a.move,bar:o.value})),d=L(()=>i.value[o.value.offset]**2/s.wrapElement[o.value.scrollSize]/a.ratio/c.value[o.value.offset]),h=u=>{var E;if(u.stopPropagation(),u.ctrlKey||[1,2].includes(u.button))return;(E=window.getSelection())==null||E.removeAllRanges(),w(u);const T=u.currentTarget;T&&(f.value[o.value.axis]=T[o.value.offset]-(u[o.value.client]-T.getBoundingClientRect()[o.value.direction]))},H=u=>{if(!c.value||!i.value||!s.wrapElement)return;const E=Math.abs(u.target.getBoundingClientRect()[o.value.direction]-u[o.value.client]),T=c.value[o.value.offset]/2,N=(E-T)*100*d.value/i.value[o.value.offset];s.wrapElement[o.value.scroll]=N*s.wrapElement[o.value.scrollSize]/100},w=u=>{u.stopImmediatePropagation(),p=!0,document.addEventListener("mousemove",S),document.addEventListener("mouseup",y),r=document.onselectstart,document.onselectstart=()=>!1},S=u=>{if(!i.value||!c.value||p===!1)return;const E=f.value[o.value.axis];if(!E)return;const T=(i.value.getBoundingClientRect()[o.value.direction]-u[o.value.client])*-1,N=c.value[o.value.offset]-E,ee=(T-N)*100*d.value/i.value[o.value.offset];s.wrapElement[o.value.scroll]=ee*s.wrapElement[o.value.scrollSize]/100},y=()=>{p=!1,f.value[o.value.axis]=0,document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",y),e(),b&&(v.value=!1)},R=()=>{b=!1,v.value=!!a.size},z=()=>{b=!0,v.value=p};ae(()=>{e(),document.removeEventListener("mouseup",y)});const e=()=>{document.onselectstart!==r&&(document.onselectstart=r)};return W(j(s,"scrollbarElement"),"mousemove",R),W(j(s,"scrollbarElement"),"mouseleave",z),(u,E)=>(x(),A(re,{name:g(l).b("fade"),persisted:""},{default:Q(()=>[se(M("div",{ref_key:"instance",ref:i,class:B([g(l).e("bar"),g(l).is(g(o).key)]),onMousedown:H,onClick:le(()=>{},["stop"])},[M("div",{ref_key:"thumb",ref:c,class:B(g(l).e("thumb")),style:O(g(n)),onMousedown:h},null,38)],42,["onClick"]),[[oe,u.always||v.value]])]),_:1},8,["name"]))}});var X=D(Le,[["__file","thumb.vue"]]);const ke=$({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),xe=P({__name:"bar",props:ke,setup(t,{expose:a}){const s=t,l=q(K),i=m(0),c=m(0),f=m(""),v=m(""),p=m(1),b=m(1);return a({handleScroll:n=>{if(n){const d=n.offsetHeight-C,h=n.offsetWidth-C;c.value=n.scrollTop*100/d*p.value,i.value=n.scrollLeft*100/h*b.value}},update:()=>{const n=l?.wrapElement;if(!n)return;const d=n.offsetHeight-C,h=n.offsetWidth-C,H=d**2/n.scrollHeight,w=h**2/n.scrollWidth,S=Math.max(H,s.minSize),y=Math.max(w,s.minSize);p.value=H/(d-H)/(S/(d-S)),b.value=w/(h-w)/(y/(h-y)),v.value=S+C<d?`${S}px`:"",f.value=y+C<h?`${y}px`:""}}),(n,d)=>(x(),Z(ne,null,[F(X,{move:i.value,ratio:b.value,size:f.value,always:n.always},null,8,["move","ratio","size","always"]),F(X,{move:c.value,ratio:p.value,size:v.value,vertical:"",always:n.always},null,8,["move","ratio","size","always"])],64))}});var Be=D(xe,[["__file","bar.vue"]]);const Pe=$({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ie([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...Ee(["ariaLabel","ariaOrientation"])}),Re={scroll:({scrollTop:t,scrollLeft:a})=>[t,a].every(k)},Ne="ElScrollbar",Ae=P({name:Ne}),Me=P({...Ae,props:Pe,emits:Re,setup(t,{expose:a,emit:s}){const l=t,i=G("scrollbar");let c,f,v=0,p=0;const b=m(),r=m(),o=m(),n=m(),d=L(()=>{const e={};return l.height&&(e.height=U(l.height)),l.maxHeight&&(e.maxHeight=U(l.maxHeight)),[l.wrapStyle,e]}),h=L(()=>[l.wrapClass,i.e("wrap"),{[i.em("wrap","hidden-default")]:!l.native}]),H=L(()=>[i.e("view"),l.viewClass]),w=()=>{var e;r.value&&((e=n.value)==null||e.handleScroll(r.value),v=r.value.scrollTop,p=r.value.scrollLeft,s("scroll",{scrollTop:r.value.scrollTop,scrollLeft:r.value.scrollLeft}))};function S(e,u){be(e)?r.value.scrollTo(e):k(e)&&k(u)&&r.value.scrollTo(e,u)}const y=e=>{k(e)&&(r.value.scrollTop=e)},R=e=>{k(e)&&(r.value.scrollLeft=e)},z=()=>{var e;(e=n.value)==null||e.update()};return I(()=>l.noresize,e=>{e?(c?.(),f?.()):({stop:c}=we(o,z),f=W("resize",z))},{immediate:!0}),I(()=>[l.maxHeight,l.height],()=>{l.native||V(()=>{var e;z(),r.value&&((e=n.value)==null||e.handleScroll(r.value))})}),ce(K,ue({scrollbarElement:b,wrapElement:r})),fe(()=>{r.value&&(r.value.scrollTop=v,r.value.scrollLeft=p)}),ve(()=>{l.native||V(()=>{z()})}),de(()=>z()),a({wrapRef:r,update:z,scrollTo:S,setScrollTop:y,setScrollLeft:R,handleScroll:w}),(e,u)=>(x(),Z("div",{ref_key:"scrollbarRef",ref:b,class:B(g(i).b())},[M("div",{ref_key:"wrapRef",ref:r,class:B(g(h)),style:O(g(d)),tabindex:e.tabindex,onScroll:w},[(x(),A(he(e.tag),{id:e.id,ref_key:"resizeRef",ref:o,class:B(g(H)),style:O(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:Q(()=>[pe(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),e.native?me("v-if",!0):(x(),A(Be,{key:0,ref_key:"barRef",ref:n,always:e.always,"min-size":e.minSize},null,8,["always","min-size"]))],2))}});var Oe=D(Me,[["__file","scrollbar.vue"]]);const Fe=ye(Oe),_=new Map;if(J){let t;document.addEventListener("mousedown",a=>t=a),document.addEventListener("mouseup",a=>{if(t){for(const s of _.values())for(const{documentHandler:l}of s)l(a,t);t=void 0}})}function Y(t,a){let s=[];return ge(a.arg)?s=a.arg:Se(a.arg)&&s.push(a.arg),function(l,i){const c=a.instance.popperRef,f=l.target,v=i?.target,p=!a||!a.instance,b=!f||!v,r=t.contains(f)||t.contains(v),o=t===f,n=s.length&&s.some(h=>h?.contains(f))||s.length&&s.includes(v),d=c&&(c.contains(f)||c.contains(v));p||b||r||o||n||d||a.value(l,i)}}const Ue={beforeMount(t,a){_.has(t)||_.set(t,[]),_.get(t).push({documentHandler:Y(t,a),bindingFn:a.value})},updated(t,a){_.has(t)||_.set(t,[]);const s=_.get(t),l=s.findIndex(c=>c.bindingFn===a.oldValue),i={documentHandler:Y(t,a),bindingFn:a.value};l>=0?s.splice(l,1,i):s.push(i)},unmounted(t){_.delete(t)}};export{Ue as C,Fe as E,je as c,Re as s};
