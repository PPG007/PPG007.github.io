import{al as ge,a$ as _e,a3 as D,a4 as Q,a5 as le,f as F,a6 as Z,a7 as U,g as T,K as V,aP as Ce,c as re,o as ie,ab as Ne,ac as ce,u as k,V as ee,ao as te,W as M,a2 as ue,bj as Te,e as d,aC as K,br as Pe,bs as we,bm as Ee,ah as $e,a8 as Se,aa as G,bt as xe,aT as se,af as Be,aq as Oe,bd as ne,aO as ke,a1 as Re,aK as ze,aA as Ae,aL as Le,b0 as Ve,ae as Fe}from"./app-rQI8KFp-.js";import{m as de,a as J,l as Me,n as Ie}from"./URL.vue_vue_type_style_index_0_scoped_63a2b590_lang-76B7habx.js";import{t as ae,U as be}from"./event-BE20p1dL.js";import{c as A}from"./strings-DiHTZHGm.js";import{E as z}from"./aria-BUADUvnR.js";import{f as Ke}from"./vnode-BwkhdqlV.js";const De=(e,o,b)=>Ke(e.subTree).filter(s=>{var u;return _e(s)&&((u=s.type)==null?void 0:u.name)===o&&!!s.component}).map(s=>s.component.uid).map(s=>b[s]).filter(s=>!!s),Ue=(e,o)=>{const b={},f=ge([]);return{children:f,addChild:u=>{b[u.uid]=u,f.value=De(e,o,b)},removeChild:u=>{delete b[u],f.value=f.value.filter(v=>v.uid!==u)}}},W=Symbol("tabsRootContextKey"),We=D({tabs:{type:Q(Array),default:()=>de([])}}),fe="ElTabBar",qe=F({name:fe}),je=F({...qe,props:We,setup(e,{expose:o}){const b=e,f=ee(),t=Z(W);t||ae(fe,"<el-tabs><el-tab-bar /></el-tabs>");const s=U("tabs"),u=T(),v=T(),h=()=>{let l=0,_=0;const p=["top","bottom"].includes(t.props.tabPosition)?"width":"height",O=p==="width"?"x":"y",n=O==="x"?"left":"top";return b.tabs.every($=>{var P,x;const C=(x=(P=f.parent)==null?void 0:P.refs)==null?void 0:x[`tab-${$.uid}`];if(!C)return!1;if(!$.active)return!0;l=C[`offset${A(n)}`],_=C[`client${A(p)}`];const S=window.getComputedStyle(C);return p==="width"&&(_-=Number.parseFloat(S.paddingLeft)+Number.parseFloat(S.paddingRight),l+=Number.parseFloat(S.paddingLeft)),!1}),{[p]:`${_}px`,transform:`translate${A(O)}(${l}px)`}},N=()=>v.value=h(),y=[],i=()=>{var l;y.forEach(p=>p.stop()),y.length=0;const _=(l=f.parent)==null?void 0:l.refs;if(_){for(const p in _)if(p.startsWith("tab-")){const O=_[p];O&&y.push(J(O,N))}}};V(()=>b.tabs,async()=>{await te(),N(),i()},{immediate:!0});const m=J(u,()=>N());return Ce(()=>{y.forEach(l=>l.stop()),y.length=0,m.stop()}),o({ref:u,update:N}),(l,_)=>(ie(),re("div",{ref_key:"barRef",ref:u,class:ce([k(s).e("active-bar"),k(s).is(k(t).props.tabPosition)]),style:Ne(v.value)},null,6))}});var He=le(je,[["__file","tab-bar.vue"]]);const Xe=D({panes:{type:Q(Array),default:()=>de([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Ye={tabClick:(e,o,b)=>b instanceof Event,tabRemove:(e,o)=>o instanceof Event},oe="ElTabNav",Ge=F({name:oe,props:Xe,emits:Ye,setup(e,{expose:o,emit:b}){const f=Z(W);f||ae(oe,"<el-tabs><tab-nav /></el-tabs>");const t=U("tabs"),s=Me(),u=Ie(),v=T(),h=T(),N=T(),y=T(),i=T(!1),m=T(0),l=T(!1),_=T(!0),p=M(()=>["top","bottom"].includes(f.props.tabPosition)?"width":"height"),O=M(()=>({transform:`translate${p.value==="width"?"X":"Y"}(-${m.value}px)`})),n=()=>{if(!v.value)return;const r=v.value[`offset${A(p.value)}`],c=m.value;if(!c)return;const a=c>r?c-r:0;m.value=a},$=()=>{if(!v.value||!h.value)return;const r=h.value[`offset${A(p.value)}`],c=v.value[`offset${A(p.value)}`],a=m.value;if(r-a<=c)return;const w=r-a>c*2?a+c:r-c;m.value=w},P=async()=>{const r=h.value;if(!i.value||!N.value||!v.value||!r)return;await te();const c=N.value.querySelector(".is-active");if(!c)return;const a=v.value,w=["top","bottom"].includes(f.props.tabPosition),g=c.getBoundingClientRect(),E=a.getBoundingClientRect(),I=w?r.offsetWidth-E.width:r.offsetHeight-E.height,R=m.value;let B=R;w?(g.left<E.left&&(B=R-(E.left-g.left)),g.right>E.right&&(B=R+g.right-E.right)):(g.top<E.top&&(B=R-(E.top-g.top)),g.bottom>E.bottom&&(B=R+(g.bottom-E.bottom))),B=Math.max(B,0),m.value=Math.min(B,I)},x=()=>{var r;if(!h.value||!v.value)return;e.stretch&&((r=y.value)==null||r.update());const c=h.value[`offset${A(p.value)}`],a=v.value[`offset${A(p.value)}`],w=m.value;a<c?(i.value=i.value||{},i.value.prev=w,i.value.next=w+a<c,c-w<a&&(m.value=c-a)):(i.value=!1,w>0&&(m.value=0))},C=r=>{let c=0;switch(r.code){case z.left:case z.up:c=-1;break;case z.right:case z.down:c=1;break;default:return}const a=Array.from(r.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let g=a.indexOf(r.target)+c;g<0?g=a.length-1:g>=a.length&&(g=0),a[g].focus({preventScroll:!0}),a[g].click(),S()},S=()=>{_.value&&(l.value=!0)},q=()=>l.value=!1;return V(s,r=>{r==="hidden"?_.value=!1:r==="visible"&&setTimeout(()=>_.value=!0,50)}),V(u,r=>{r?setTimeout(()=>_.value=!0,50):_.value=!1}),J(N,x),ue(()=>setTimeout(()=>P(),0)),Te(()=>x()),o({scrollToActiveTab:P,removeFocus:q,tabListRef:h,tabBarRef:y}),()=>{const r=i.value?[d("span",{class:[t.e("nav-prev"),t.is("disabled",!i.value.prev)],onClick:n},[d(K,null,{default:()=>[d(Pe,null,null)]})]),d("span",{class:[t.e("nav-next"),t.is("disabled",!i.value.next)],onClick:$},[d(K,null,{default:()=>[d(we,null,null)]})])]:null,c=e.panes.map((a,w)=>{var g,E,I,R;const B=a.uid,j=a.props.disabled,H=(E=(g=a.props.name)!=null?g:a.index)!=null?E:`${w}`,X=!j&&(a.isClosable||e.editable);a.index=`${w}`;const pe=X?d(K,{class:"is-icon-close",onClick:L=>b("tabRemove",a,L)},{default:()=>[d(Ee,null,null)]}):null,he=((R=(I=a.slots).label)==null?void 0:R.call(I))||a.props.label,ye=!j&&a.active?0:-1;return d("div",{ref:`tab-${B}`,class:[t.e("item"),t.is(f.props.tabPosition),t.is("active",a.active),t.is("disabled",j),t.is("closable",X),t.is("focus",l.value)],id:`tab-${H}`,key:`tab-${B}`,"aria-controls":`pane-${H}`,role:"tab","aria-selected":a.active,tabindex:ye,onFocus:()=>S(),onBlur:()=>q(),onClick:L=>{q(),b("tabClick",a,H,L)},onKeydown:L=>{X&&(L.code===z.delete||L.code===z.backspace)&&b("tabRemove",a,L)}},[he,pe])});return d("div",{ref:N,class:[t.e("nav-wrap"),t.is("scrollable",!!i.value),t.is(f.props.tabPosition)]},[r,d("div",{class:t.e("nav-scroll"),ref:v},[d("div",{class:[t.e("nav"),t.is(f.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(f.props.tabPosition))],ref:h,style:O.value,role:"tablist",onKeydown:C},[e.type?null:d(He,{ref:y,tabs:[...e.panes]},null),c])])])}}}),Je=D({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Q(Function),default:()=>!0},stretch:Boolean}),Y=e=>$e(e)||Se(e),Qe={[be]:e=>Y(e),tabClick:(e,o)=>o instanceof Event,tabChange:e=>Y(e),edit:(e,o)=>["remove","add"].includes(o),tabRemove:e=>Y(e),tabAdd:()=>!0},Ze=F({name:"ElTabs",props:Je,emits:Qe,setup(e,{emit:o,slots:b,expose:f}){var t;const s=U("tabs"),u=M(()=>["left","right"].includes(e.tabPosition)),{children:v,addChild:h,removeChild:N}=Ue(ee(),"ElTabPane"),y=T(),i=T((t=e.modelValue)!=null?t:"0"),m=async(n,$=!1)=>{var P,x;if(!(i.value===n||se(n)))try{let C;if(e.beforeLeave){const S=e.beforeLeave(n,i.value);C=S instanceof Promise?await S:S}else C=!0;C!==!1&&(i.value=n,$&&(o(be,n),o("tabChange",n)),(x=(P=y.value)==null?void 0:P.removeFocus)==null||x.call(P))}catch{}},l=(n,$,P)=>{n.props.disabled||(o("tabClick",n,P),m($,!0))},_=(n,$)=>{n.props.disabled||se(n.props.name)||($.stopPropagation(),o("edit",n.props.name,"remove"),o("tabRemove",n.props.name))},p=()=>{o("edit",void 0,"add"),o("tabAdd")};V(()=>e.modelValue,n=>m(n)),V(i,async()=>{var n;await te(),(n=y.value)==null||n.scrollToActiveTab()}),Be(W,{props:e,currentName:i,registerPane:n=>{v.value.push(n)},sortPane:h,unregisterPane:N}),f({currentName:i,tabNavRef:y});const O=({render:n})=>n();return()=>{const n=b["add-icon"],$=e.editable||e.addable?d("div",{class:[s.e("new-tab"),u.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:p,onKeydown:C=>{[z.enter,z.numpadEnter].includes(C.code)&&p()}},[n?G(b,"add-icon"):d(K,{class:s.is("icon-plus")},{default:()=>[d(xe,null,null)]})]):null,P=d("div",{class:[s.e("header"),u.value&&s.e("header-vertical"),s.is(e.tabPosition)]},[d(O,{render:()=>{const C=v.value.some(S=>S.slots.label);return d(Ge,{ref:y,currentName:i.value,editable:e.editable,type:e.type,panes:v.value,stretch:e.stretch,onTabClick:l,onTabRemove:_},{$stable:!C})}},null),$]),x=d("div",{class:s.e("content")},[G(b,"default")]);return d("div",{class:[s.b(),s.m(e.tabPosition),{[s.m("card")]:e.type==="card",[s.m("border-card")]:e.type==="border-card"}]},[x,P])}}});var et=Ze;const tt=D({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),ve="ElTabPane",at=F({name:ve}),st=F({...at,props:tt,setup(e){const o=e,b=ee(),f=Oe(),t=Z(W);t||ae(ve,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=U("tab-pane"),u=T(),v=M(()=>o.closable||t.props.closable),h=ne(()=>{var l;return t.currentName.value===((l=o.name)!=null?l:u.value)}),N=T(h.value),y=M(()=>{var l;return(l=o.name)!=null?l:u.value}),i=ne(()=>!o.lazy||N.value||h.value);V(h,l=>{l&&(N.value=!0)});const m=ke({uid:b.uid,slots:f,props:o,paneName:y,active:h,index:u,isClosable:v});return t.registerPane(m),ue(()=>{t.sortPane(m)}),Re(()=>{t.unregisterPane(m.uid)}),(l,_)=>k(i)?ze((ie(),re("div",{key:0,id:`pane-${k(y)}`,class:ce(k(s).b()),role:"tabpanel","aria-hidden":!k(h),"aria-labelledby":`tab-${k(y)}`},[G(l.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Le,k(h)]]):Ae("v-if",!0)}});var me=le(st,[["__file","tab-pane.vue"]]);const ut=Fe(et,{TabPane:me}),dt=Ve(me);export{dt as E,ut as a};
