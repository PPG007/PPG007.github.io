import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,a,d as l,e,w as h,r as t,o as k,b as c}from"./app-rQI8KFp-.js";const r={};function d(g,s){const i=t("RouteLink");return k(),n("div",null,[s[1]||(s[1]=a("h1",{id:"mybatis",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#mybatis"},[a("span",null,"Mybatis")])],-1)),a("p",null,[e(i,{to:"/mybatis/"},{default:h(()=>s[0]||(s[0]=[c("Mybatis")])),_:1,__:[0]})]),s[2]||(s[2]=l(`<h2 id="相关依赖" tabindex="-1"><a class="header-anchor" href="#相关依赖"><span>相关依赖</span></a></h2><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-xml"><span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">dependency</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">groupId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">mysql</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">groupId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">artifactId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">mysql-connector-java</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">artifactId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">version</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">8.0.21</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">version</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">dependency</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">dependency</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">groupId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">org.mybatis</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">groupId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">artifactId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">mybatis</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">artifactId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">version</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">3.5.5</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">version</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">dependency</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">dependency</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">groupId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">org.springframework</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">groupId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">artifactId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">spring-jdbc</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">artifactId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">version</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">5.2.9.RELEASE</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">version</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">dependency</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">dependency</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">groupId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">org.mybatis</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">groupId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">artifactId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">mybatis-spring</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">artifactId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">version</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">2.0.5</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">version</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">dependency</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="整合mybatis" tabindex="-1"><a class="header-anchor" href="#整合mybatis"><span>整合Mybatis</span></a></h2><p>要和 Spring 一起使用 MyBatis，需要在 Spring 应用上下文中定义至少两样东西：一个 <strong>SqlSessionFactory</strong> 和至少一个<strong>数据映射器</strong>类。</p><h3 id="使用-xml-配置整合" tabindex="-1"><a class="header-anchor" href="#使用-xml-配置整合"><span>使用 xml 配置整合</span></a></h3><p>配置数据源：</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-xml"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">id</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;datasource&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;url&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">value</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;jdbc:mysql://localhost:3306/mydata?serverTimezone=UTC&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;username&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">value</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;root&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;password&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">value</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;123456&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;driverClassName&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">value</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置 SqlSessionFactory，对应的 class 为 <strong>SqlSessionFactoryBean</strong>：</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-xml"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">id</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSessionFactory&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;dataSource&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">ref</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;datasource&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;configLocation&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">value</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;mybatis-config.xml&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;mapperLocations&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">value</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;classpath:mapper/UserMapper.xml&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置 mapper 接口：</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-xml"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">id</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;userMapper&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;org.mybatis.spring.mapper.MapperFactoryBean&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSessionFactory&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">ref</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSessionFactory&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;mapperInterface&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">value</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;zch.mapper.UserMapper&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>调用代码：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-java"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">@</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Test</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#267F99;">void</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">test</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">throws</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">Exception</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">ClassPathXmlApplicationContext</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">context</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">new</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">ClassPathXmlApplicationContext</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;beans.xml&quot;</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">)</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">UserMapper</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">userMapper</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">context</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getBean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;userMapper&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">UserMapper</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">List</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">&lt;</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">User</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">&gt;</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">users</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">userMapper</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">queryUsers</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">users</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">forEach</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">System</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">out</span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">::</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">println);</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>也可以不使用 MapperFactoryBean 来注册 mapper 接口，首先构造 mapper 接口的实现类，实现类中设置一个 sqlsession 对象，通过 sqlSession 实现增删改查，并在 Spring 配置中使用 set 方法注入。</p><p>还可以直接在 Spring 中配置 sqlSession，sqlSession 对应的 class 为 <strong>sqlSessionTemplate</strong>。</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-xml"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">id</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSession&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">constructor-arg</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">index</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;0&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">ref</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSessionFactory&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">id</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;userMapper&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;org.mybatis.spring.mapper.MapperFactoryBean&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSessionFactory&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">ref</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSessionFactory&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSessionTemplate&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">ref</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSession&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;mapperInterface&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">value</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;zch.mapper.UserMapper&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h4 id="关于-sqlsessionfactorybean" tabindex="-1"><a class="header-anchor" href="#关于-sqlsessionfactorybean"><span>关于 SqlSessionFactoryBean</span></a></h4><p>多数据库支持：设置 <code>databaseIdProvider</code> 属性。</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-xml"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">id</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;databaseIdProvider&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;org.apache.ibatis.mapping.VendorDatabaseIdProvider&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;properties&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">props</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">prop</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">key</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;SQL</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">Server&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">sqlserver</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">prop</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">prop</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">key</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;DB2&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">db2</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">prop</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">prop</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">key</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;Oracle&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">oracle</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">prop</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">prop</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">key</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;MySQL&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">mysql</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">prop</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">props</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置 <code>sqlSessionFactory</code> 属性：</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-xml"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">id</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSessionFactory&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;dataSource&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">ref</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;dataSource&quot;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;mapperLocations&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">value</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;classpath*:sample/config/mappers/**/*.xml&quot;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;databaseIdProvider&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">ref</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;databaseIdProvider&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过 <code>configuration</code> 属性在没有对应的 MyBatis XML 配置文件的情况下，直接设置 <code>Configuration</code> 实例。</p><ul><li>注意：<code>configLocation</code> 不能与 <code>configuration</code> 同时存在。</li></ul><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-xml"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">id</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSessionFactory&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;dataSource&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">ref</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;datasource&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">&lt;!--</span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">&lt;property</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">name=&quot;configLocation&quot;</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">value=&quot;mybatis-config.xml&quot;/&gt;--&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;mapperLocations&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">value</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;classpath:mapper/UserMapper.xml&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;configuration&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;org.apache.ibatis.session.Configuration&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">&lt;!--</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">配置标准日志</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">--&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;logImpl&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">value</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;org.apache.ibatis.logging.stdout.StdOutImpl&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">&lt;!--</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">开启驼峰命名转换</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">--&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;mapUnderscoreToCamelCase&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">value</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;true&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="关于sqlsession" tabindex="-1"><a class="header-anchor" href="#关于sqlsession"><span>关于SqlSession</span></a></h5><ul><li><p>SqlSessionTemplate：</p><p>SqlSessionTemplate 是线程安全的，是 SqlSession 的一个实现，可以被多个 DAO 或映射器所共享使用。</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-xml"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">id</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSession&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">constructor-arg</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">index</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;0&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">ref</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSessionFactory&quot;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 mapper 的实现类中实现注入：</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-xml"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">id</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;userDao&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;org.mybatis.spring.sample.dao.UserDaoImpl&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSession&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">ref</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSession&quot;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>SqlSessionDaoSupport：</p><p>SqlSessionDaoSupport 是一个抽象的支持类，用来为你提供 SqlSession。调用 getSqlSession() 方法你会得到一个 SqlSessionTemplate，之后可以用于执行 SQL 方法，就像下面这样:</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-java"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">UserDaoImpl</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">extends</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">SqlSessionDaoSupport</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">implements</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">UserDao</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">User</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getUser</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">String</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-dark-font-style:italic;--shiki-light:#001080;--shiki-light-font-style:inherit;">userId</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">)</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getSqlSession</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">().</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">selectOne</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;org.mybatis.spring.sample.mapper.UserMapper.getUser&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">userId);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SqlSessionDaoSupport 需要通过属性设置一个 sqlSessionFactory 或 SqlSessionTemplate。如果两个属性都被设置了，那么 SqlSessionFactory 将被忽略。</p><p>假设类 UserMapperImpl 是 SqlSessionDaoSupport 的子类，可以编写如下的 Spring 配置来执行设置：</p><div class="language-xml line-numbers-mode" data-highlighter="shiki" data-ext="xml" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-xml"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">id</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;userDao&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;org.mybatis.spring.sample.dao.UserDaoImpl&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">property</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSessionFactory&quot;</span><span class="space"> </span><span style="--shiki-dark:#D19A66;--shiki-light:#E50000;">ref</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">=</span><span style="--shiki-dark:#98C379;--shiki-light:#0000FF;">&quot;sqlSessionFactory&quot;</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">/&gt;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&lt;/</span><span style="--shiki-dark:#E06C75;--shiki-light:#800000;">bean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#800000;">&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="使用-java-注解进行配置" tabindex="-1"><a class="header-anchor" href="#使用-java-注解进行配置"><span>使用 Java 注解进行配置</span></a></h3><p>Java Config文件：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-java"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">@</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Configuration</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">class</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Config</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">@</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Bean</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;user&quot;</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">User</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getUser</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(){</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">new</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">User</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">@</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Bean</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;userMapper&quot;</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">MapperFactoryBean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">&lt;</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">UserMapper</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">&gt;</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getUserMapper</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">throws</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Exception</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">MapperFactoryBean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">&lt;</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">UserMapper</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">&gt;</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">userMapperMapperFactoryBean</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">new</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">MapperFactoryBean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">&lt;&gt;(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">UserMapper</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">userMapperMapperFactoryBean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">setSqlSessionFactory</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getSqlSessionFactory</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">());</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">userMapperMapperFactoryBean;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">@</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Bean</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;sqlSessionFactory&quot;</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">SqlSessionFactory</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getSqlSessionFactory</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">()</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">throws</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Exception</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">SqlSessionFactoryBean</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">sqlSessionFactoryBean</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">new</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">SqlSessionFactoryBean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">sqlSessionFactoryBean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">setDataSource</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getDataSource</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">());</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">sqlSessionFactoryBean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getObject</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">@</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Bean</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;dataSource&quot;</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">DriverManagerDataSource</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getDataSource</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(){</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">DriverManagerDataSource</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">driverManagerDataSource</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">new</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">DriverManagerDataSource</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">driverManagerDataSource</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">setDriverClassName</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">driverManagerDataSource</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">setUrl</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;jdbc:mysql://localhost:3306/mydata?serverTimezone=UTC&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">driverManagerDataSource</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">setUsername</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;root&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">driverManagerDataSource</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">setPassword</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;123456&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">return</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">driverManagerDataSource;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>mapper接口：</p><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-java"><span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">interface</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">UserMapper</span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">{</span></span>
<span class="line"></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">/**</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">*</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">get</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">users</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">*</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-dark-font-style:italic;--shiki-light:#0000FF;--shiki-light-font-style:inherit;">@return</span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">userList</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#7F848E;--shiki-dark-font-style:italic;--shiki-light:#008000;--shiki-light-font-style:inherit;">*/</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">@</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Select</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;select</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">*</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">from</span><span class="space"> </span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">mydata.usertable&quot;</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">)</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">List</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">&lt;</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">User</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">&gt;</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getUsers</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-highlighter="shiki" data-ext="java" style="--shiki-dark:#abb2bf;--shiki-light:#000000;--shiki-dark-bg:#282c34;--shiki-light-bg:#FFFFFF;"><pre class="shiki shiki-themes one-dark-pro light-plus vp-code"><code class="language-java"><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">@</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">Test</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0000FF;">public</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#267F99;">void</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">test</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">(){</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">AnnotationConfigApplicationContext</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">annotationConfigApplicationContext</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">new</span><span class="space"> </span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">AnnotationConfigApplicationContext</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">Config</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">class</span><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">)</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">;</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">UserMapper</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">userMapper</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">annotationConfigApplicationContext</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getBean</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#A31515;">&quot;userMapper&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">,</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">UserMapper</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">class</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">);</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">List</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">&lt;</span><span style="--shiki-dark:#E5C07B;--shiki-light:#267F99;">User</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">&gt;</span><span class="space"> </span><span style="--shiki-dark:#E06C75;--shiki-light:#001080;">users</span><span class="space"> </span><span style="--shiki-dark:#56B6C2;--shiki-light:#000000;">=</span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">userMapper</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">getUsers</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">();</span></span>
<span class="line"><span class="space"> </span><span class="space"> </span><span class="space"> </span><span class="space"> </span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">users</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#795E26;">forEach</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">System</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#001080;">out</span><span style="--shiki-dark:#C678DD;--shiki-light:#AF00DB;">::</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#000000;">println);</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#000000;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h3><ol><li>配置数据源 <ul><li>数据源对应的Java Class为：DriverManagerDataSource</li><li>通过注解配置时，要注意返回的类型是 DriverManagerDataSource</li></ul></li><li>配置SqlSessionFactory <ul><li>对应的Java Class为：SqlSessionFactoryBean 通过注解配置时同样返回SqlSessionFactoryBean的getObject()</li></ul></li><li>直接利用SqlSessionFactory配置mapper <ul><li>对应的Java Class为：MapperFactoryBean</li></ul></li><li>或者在mapper接口的实现类中进行SqlSession的配置 <ul><li>直接使用SqlSession实现CRUD，mapper注入SqlSessionTemplate，在SqlSessionTemplate中注入SqlSessionFactory</li><li>通过继承SqlSessionDaoSupport，注入SqlSessionFactory</li></ul></li></ol>`,32))])}const F=p(r,[["render",d]]),o=JSON.parse('{"path":"/spring/docs/mybatis.html","title":"Mybatis","lang":"zh-CN","frontmatter":{"description":"Mybatis 相关依赖 整合Mybatis 要和 Spring 一起使用 MyBatis，需要在 Spring 应用上下文中定义至少两样东西：一个 SqlSessionFactory 和至少一个数据映射器类。 使用 xml 配置整合 配置数据源： 配置 SqlSessionFactory，对应的 class 为 SqlSessionFactoryBe...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Mybatis\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-05-13T05:52:32.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://ppg007.github.io/spring/docs/mybatis.html"}],["meta",{"property":"og:site_name","content":"PPG007 的文档"}],["meta",{"property":"og:title","content":"Mybatis"}],["meta",{"property":"og:description","content":"Mybatis 相关依赖 整合Mybatis 要和 Spring 一起使用 MyBatis，需要在 Spring 应用上下文中定义至少两样东西：一个 SqlSessionFactory 和至少一个数据映射器类。 使用 xml 配置整合 配置数据源： 配置 SqlSessionFactory，对应的 class 为 SqlSessionFactoryBe..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-13T05:52:32.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-13T05:52:32.000Z"}]]},"git":{"createdTime":1640525939000,"updatedTime":1747115552000,"contributors":[{"name":"PPG007","username":"PPG007","email":"1658272229@com请求","commits":1,"url":"https://github.com/PPG007"},{"name":"Koston Zhuang","username":"","email":"koston.zhuang@maiscrm.com","commits":2}]},"readingTime":{"minutes":3.27,"words":980},"filePathRelative":"spring/docs/mybatis.md","excerpt":"\\n<p><a href=\\"/mybatis/\\" target=\\"_blank\\">Mybatis</a></p>","autoDesc":true}');export{F as comp,o as data};
